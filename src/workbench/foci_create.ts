// This file was auto generated by Styx.
// Do not edit this file directly.

import { Runner, Execution, Metadata, InputPathType, OutputPathType, getGlobalRunner } from 'styxdefs';

const FOCI_CREATE_METADATA: Metadata = {
    id: "1960245f5f1335cfba8188182bda09435e59d575.workbench",
    name: "foci-create",
    package: "workbench",
};


interface FociCreateClassParameters {
    "@type"?: "class";
    "class-name": string;
    "foci-list-file": string;
    "surface": InputPathType;
}
type FociCreateClassParametersTagged = Required<Pick<FociCreateClassParameters, '@type'>> & FociCreateClassParameters;


interface FociCreateParameters {
    "@type"?: "workbench/foci-create";
    "output": string;
    "class"?: Array<FociCreateClassParameters> | null | undefined;
}
type FociCreateParametersTagged = Required<Pick<FociCreateParameters, '@type'>> & FociCreateParameters;


/**
 * Build parameters.
 *
 * @param class_name name of class
 * @param foci_list_file text file containing foci names, coordinates, and colors
 * @param surface surface file for projection of foci list file
 *
 * @returns Parameter dictionary
 */
function foci_create_class_params(
    class_name: string,
    foci_list_file: string,
    surface: InputPathType,
): FociCreateClassParametersTagged {
    const params = {
        "@type": "class" as const,
        "class-name": class_name,
        "foci-list-file": foci_list_file,
        "surface": surface,
    };
    return params;
}


/**
 * Build command-line arguments from parameters.
 *
 * @param params The parameters.
 * @param execution The execution object for resolving input paths.
 *
 * @returns Command-line arguments.
 */
function foci_create_class_cargs(
    params: FociCreateClassParameters,
    execution: Execution,
): string[] {
    const cargs: string[] = [];
    cargs.push(
        "-class",
        (params["class-name"] ?? null),
        (params["foci-list-file"] ?? null),
        execution.inputFile((params["surface"] ?? null))
    );
    return cargs;
}


/**
 * Output object returned when calling `FociCreateParameters(...)`.
 *
 * @interface
 */
interface FociCreateOutputs {
    /**
     * Output root folder. This is the root folder for all outputs.
     */
    root: OutputPathType;
    /**
     * the output foci file
     */
    output: OutputPathType;
}


/**
 * Build parameters.
 *
 * @param output the output foci file
 * @param class_ specify class input data
 *
 * @returns Parameter dictionary
 */
function foci_create_params(
    output: string,
    class_: Array<FociCreateClassParameters> | null = null,
): FociCreateParametersTagged {
    const params = {
        "@type": "workbench/foci-create" as const,
        "output": output,
    };
    if (class_ !== null) {
        params["class"] = class_;
    }
    return params;
}


/**
 * Build command-line arguments from parameters.
 *
 * @param params The parameters.
 * @param execution The execution object for resolving input paths.
 *
 * @returns Command-line arguments.
 */
function foci_create_cargs(
    params: FociCreateParameters,
    execution: Execution,
): string[] {
    const cargs: string[] = [];
    if ((params["class"] ?? null) !== null) {
        cargs.push(
            "wb_command",
            "-foci-create",
            (params["output"] ?? null),
            ...(params["class"] ?? null).map(s => foci_create_class_cargs(s, execution)).flat()
        );
    }
    return cargs;
}


/**
 * Build outputs object containing output file paths and possibly stdout/stderr.
 *
 * @param params The parameters.
 * @param execution The execution object for resolving input paths.
 *
 * @returns Outputs object.
 */
function foci_create_outputs(
    params: FociCreateParameters,
    execution: Execution,
): FociCreateOutputs {
    const ret: FociCreateOutputs = {
        root: execution.outputFile("."),
        output: execution.outputFile([(params["output"] ?? null)].join('')),
    };
    return ret;
}


/**
 * CREATE A FOCI FILE.
 *
 * Creates a foci file from names, coordinates, and RGB values in a text file.  The text file must have the following format (2 lines per focus):
 *
 * <focus-name>
 * <red> <green> <blue> <x> <y> <z> 
 * ...
 *
 * Foci names are specified on a separate line from their coordinates and color, in order to let foci names contain spaces.  Whitespace is trimmed from both ends of the foci name, but is kept if it is in the middle of a name.  The values of <red>, <green>, <blue> and must be integers from 0 to 255, and will specify the color the foci is drawn as.
 *
 * Foci are grouped into classes and the name for the class is specified using the <class-name> parameter.
 *
 * All foci within one text file must be associated with the structure contained in the <surface> parameter and are projected to that surface.
 *
 * @param params The parameters.
 * @param runner Command runner
 *
 * @returns NamedTuple of outputs (described in `FociCreateOutputs`).
 */
function foci_create_execute(
    params: FociCreateParameters,
    runner: Runner | null = null,
): FociCreateOutputs {
    runner = runner || getGlobalRunner();
    const execution = runner.startExecution(FOCI_CREATE_METADATA);
    params = execution.params(params)
    const cargs = foci_create_cargs(params, execution)
    const ret = foci_create_outputs(params, execution)
    execution.run(cargs, undefined);
    return ret;
}


/**
 * CREATE A FOCI FILE.
 *
 * Creates a foci file from names, coordinates, and RGB values in a text file.  The text file must have the following format (2 lines per focus):
 *
 * <focus-name>
 * <red> <green> <blue> <x> <y> <z> 
 * ...
 *
 * Foci names are specified on a separate line from their coordinates and color, in order to let foci names contain spaces.  Whitespace is trimmed from both ends of the foci name, but is kept if it is in the middle of a name.  The values of <red>, <green>, <blue> and must be integers from 0 to 255, and will specify the color the foci is drawn as.
 *
 * Foci are grouped into classes and the name for the class is specified using the <class-name> parameter.
 *
 * All foci within one text file must be associated with the structure contained in the <surface> parameter and are projected to that surface.
 *
 * @param output the output foci file
 * @param class_ specify class input data
 * @param runner Command runner
 *
 * @returns NamedTuple of outputs (described in `FociCreateOutputs`).
 */
function foci_create(
    output: string,
    class_: Array<FociCreateClassParameters> | null = null,
    runner: Runner | null = null,
): FociCreateOutputs {
    const params = foci_create_params(output, class_)
    return foci_create_execute(params, runner);
}


export {
      FOCI_CREATE_METADATA,
      FociCreateOutputs,
      foci_create,
      foci_create_class_params,
      foci_create_execute,
      foci_create_params,
};
