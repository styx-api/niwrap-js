// This file was auto generated by Styx.
// Do not edit this file directly.

import { Runner, Execution, Metadata, InputPathType, OutputPathType, getGlobalRunner } from 'styxdefs';

const CIFTI_AVERAGE_DENSE_ROI_METADATA: Metadata = {
    id: "0fd33a97699f38cf197556ae9aed297156e9295a.workbench",
    name: "cifti-average-dense-roi",
    package: "workbench",
};


interface CiftiAverageDenseRoiCiftiRoiParamsDict {
    "@type"?: "cifti-roi";
    "roi-cifti": InputPathType;
    "in-memory": boolean;
}
type CiftiAverageDenseRoiCiftiRoiParamsDictTagged = Required<Pick<CiftiAverageDenseRoiCiftiRoiParamsDict, '@type'>> & CiftiAverageDenseRoiCiftiRoiParamsDict;


interface CiftiAverageDenseRoiCiftiParamsDict {
    "@type"?: "cifti";
    "cifti-in": InputPathType;
}
type CiftiAverageDenseRoiCiftiParamsDictTagged = Required<Pick<CiftiAverageDenseRoiCiftiParamsDict, '@type'>> & CiftiAverageDenseRoiCiftiParamsDict;


interface CiftiAverageDenseRoiParamsDict {
    "@type"?: "workbench/cifti-average-dense-roi";
    "cifti-out": string;
    "cifti-roi"?: CiftiAverageDenseRoiCiftiRoiParamsDict | null | undefined;
    "roi-metric"?: InputPathType | null | undefined;
    "roi-metric"?: InputPathType | null | undefined;
    "roi-metric"?: InputPathType | null | undefined;
    "roi-vol"?: InputPathType | null | undefined;
    "left-surf"?: InputPathType | null | undefined;
    "right-surf"?: InputPathType | null | undefined;
    "cerebellum-surf"?: InputPathType | null | undefined;
    "cifti"?: Array<CiftiAverageDenseRoiCiftiParamsDict> | null | undefined;
}
type CiftiAverageDenseRoiParamsDictTagged = Required<Pick<CiftiAverageDenseRoiParamsDict, '@type'>> & CiftiAverageDenseRoiParamsDict;


/**
 * Build parameters.
 *
 * @param roi_cifti the roi cifti file
 * @param in_memory cache the roi in memory so that it isn't re-read for each input cifti
 *
 * @returns Parameter dictionary
 */
function cifti_average_dense_roi_cifti_roi(
    roi_cifti: InputPathType,
    in_memory: boolean = false,
): CiftiAverageDenseRoiCiftiRoiParamsDictTagged {
    const params = {
        "@type": "cifti-roi" as const,
        "roi-cifti": roi_cifti,
        "in-memory": in_memory,
    };
    return params;
}


/**
 * Build command-line arguments from parameters.
 *
 * @param params The parameters.
 * @param execution The execution object for resolving input paths.
 *
 * @returns Command-line arguments.
 */
function cifti_average_dense_roi_cifti_roi_cargs(
    params: CiftiAverageDenseRoiCiftiRoiParamsDict,
    execution: Execution,
): string[] {
    const cargs: string[] = [];
    if ((params["in-memory"] ?? false)) {
        cargs.push(
            "-cifti-roi",
            execution.inputFile((params["roi-cifti"] ?? null)),
            "-in-memory"
        );
    }
    return cargs;
}


/**
 * Build parameters.
 *
 * @param cifti_in a cifti file to average across
 *
 * @returns Parameter dictionary
 */
function cifti_average_dense_roi_cifti(
    cifti_in: InputPathType,
): CiftiAverageDenseRoiCiftiParamsDictTagged {
    const params = {
        "@type": "cifti" as const,
        "cifti-in": cifti_in,
    };
    return params;
}


/**
 * Build command-line arguments from parameters.
 *
 * @param params The parameters.
 * @param execution The execution object for resolving input paths.
 *
 * @returns Command-line arguments.
 */
function cifti_average_dense_roi_cifti_cargs(
    params: CiftiAverageDenseRoiCiftiParamsDict,
    execution: Execution,
): string[] {
    const cargs: string[] = [];
    cargs.push(
        "-cifti",
        execution.inputFile((params["cifti-in"] ?? null))
    );
    return cargs;
}


/**
 * Output object returned when calling `CiftiAverageDenseRoiParamsDict(...)`.
 *
 * @interface
 */
interface CiftiAverageDenseRoiOutputs {
    /**
     * Output root folder. This is the root folder for all outputs.
     */
    root: OutputPathType;
    /**
     * output cifti dscalar file
     */
    cifti_out: OutputPathType;
}


/**
 * Build parameters.
 *
 * @param cifti_out output cifti dscalar file
 * @param roi_metric weights to use for left hempsphere

the left roi as a metric file
 * @param roi_metric_ weights to use for right hempsphere

the right roi as a metric file
 * @param roi_metric_2 weights to use for cerebellum surface

the cerebellum roi as a metric file
 * @param roi_vol voxel weights to use

the roi volume file
 * @param left_surf specify the left surface for vertex area correction

the left surface file
 * @param right_surf specify the right surface for vertex area correction

the right surface file
 * @param cerebellum_surf specify the cerebellum surface for vertex area correction

the cerebellum surface file
 * @param cifti_roi cifti file containing combined weights
 * @param cifti specify an input cifti file
 *
 * @returns Parameter dictionary
 */
function cifti_average_dense_roi_params(
    cifti_out: string,
    roi_metric: InputPathType | null,
    roi_metric_: InputPathType | null,
    roi_metric_2: InputPathType | null,
    roi_vol: InputPathType | null,
    left_surf: InputPathType | null,
    right_surf: InputPathType | null,
    cerebellum_surf: InputPathType | null,
    cifti_roi: CiftiAverageDenseRoiCiftiRoiParamsDict | null = null,
    cifti: Array<CiftiAverageDenseRoiCiftiParamsDict> | null = null,
): CiftiAverageDenseRoiParamsDictTagged {
    const params = {
        "@type": "workbench/cifti-average-dense-roi" as const,
        "cifti-out": cifti_out,
    };
    if (cifti_roi !== null) {
        params["cifti-roi"] = cifti_roi;
    }
    if (roi_metric !== null) {
        params["roi-metric"] = roi_metric;
    }
    if (roi_metric_ !== null) {
        params["roi-metric"] = roi_metric_;
    }
    if (roi_metric_2 !== null) {
        params["roi-metric"] = roi_metric_2;
    }
    if (roi_vol !== null) {
        params["roi-vol"] = roi_vol;
    }
    if (left_surf !== null) {
        params["left-surf"] = left_surf;
    }
    if (right_surf !== null) {
        params["right-surf"] = right_surf;
    }
    if (cerebellum_surf !== null) {
        params["cerebellum-surf"] = cerebellum_surf;
    }
    if (cifti !== null) {
        params["cifti"] = cifti;
    }
    return params;
}


/**
 * Build command-line arguments from parameters.
 *
 * @param params The parameters.
 * @param execution The execution object for resolving input paths.
 *
 * @returns Command-line arguments.
 */
function cifti_average_dense_roi_cargs(
    params: CiftiAverageDenseRoiParamsDict,
    execution: Execution,
): string[] {
    const cargs: string[] = [];
    if ((params["cifti-roi"] ?? null) !== null || (params["roi-metric"] ?? null) !== null || (params["roi-metric"] ?? null) !== null || (params["roi-metric"] ?? null) !== null || (params["roi-vol"] ?? null) !== null || (params["left-surf"] ?? null) !== null || (params["right-surf"] ?? null) !== null || (params["cerebellum-surf"] ?? null) !== null || (params["cifti"] ?? null) !== null) {
        cargs.push(
            "wb_command",
            "-cifti-average-dense-roi",
            (params["cifti-out"] ?? null),
            ...(((params["cifti-roi"] ?? null) !== null) ? cifti_average_dense_roi_cifti_roi_cargs((params["cifti-roi"] ?? null), execution) : []),
            "-left-roi",
            (((params["roi-metric"] ?? null) !== null) ? execution.inputFile((params["roi-metric"] ?? null)) : ""),
            "-right-roi",
            (((params["roi-metric"] ?? null) !== null) ? execution.inputFile((params["roi-metric"] ?? null)) : ""),
            "-cerebellum-roi",
            (((params["roi-metric"] ?? null) !== null) ? execution.inputFile((params["roi-metric"] ?? null)) : ""),
            "-vol-roi",
            (((params["roi-vol"] ?? null) !== null) ? execution.inputFile((params["roi-vol"] ?? null)) : ""),
            "-left-area-surf",
            (((params["left-surf"] ?? null) !== null) ? execution.inputFile((params["left-surf"] ?? null)) : ""),
            "-right-area-surf",
            (((params["right-surf"] ?? null) !== null) ? execution.inputFile((params["right-surf"] ?? null)) : ""),
            "-cerebellum-area-surf",
            (((params["cerebellum-surf"] ?? null) !== null) ? execution.inputFile((params["cerebellum-surf"] ?? null)) : ""),
            ...(((params["cifti"] ?? null) !== null) ? (params["cifti"] ?? null).map(s => cifti_average_dense_roi_cifti_cargs(s, execution)).flat() : [])
        );
    }
    return cargs;
}


/**
 * Build outputs object containing output file paths and possibly stdout/stderr.
 *
 * @param params The parameters.
 * @param execution The execution object for resolving input paths.
 *
 * @returns Outputs object.
 */
function cifti_average_dense_roi_outputs(
    params: CiftiAverageDenseRoiParamsDict,
    execution: Execution,
): CiftiAverageDenseRoiOutputs {
    const ret: CiftiAverageDenseRoiOutputs = {
        root: execution.outputFile("."),
        cifti_out: execution.outputFile([(params["cifti-out"] ?? null)].join('')),
    };
    return ret;
}


/**
 * AVERAGE CIFTI ROWS ACROSS SUBJECTS BY ROI.
 *
 * Averages rows for each map of the ROI(s), across all files.  ROI maps are treated as weighting functions, including negative values.  For efficiency, ensure that everything that is not intended to be used is zero in the ROI map.  If -cifti-roi is specified, -left-roi, -right-roi, -cerebellum-roi, and -vol-roi must not be specified.  If multiple non-cifti ROI files are specified, they must have the same number of columns.
 *
 * @param params The parameters.
 * @param runner Command runner
 *
 * @returns NamedTuple of outputs (described in `CiftiAverageDenseRoiOutputs`).
 */
function cifti_average_dense_roi_execute(
    params: CiftiAverageDenseRoiParamsDict,
    runner: Runner | null = null,
): CiftiAverageDenseRoiOutputs {
    runner = runner || getGlobalRunner();
    const execution = runner.startExecution(CIFTI_AVERAGE_DENSE_ROI_METADATA);
    params = execution.params(params)
    const cargs = cifti_average_dense_roi_cargs(params, execution)
    const ret = cifti_average_dense_roi_outputs(params, execution)
    execution.run(cargs, undefined);
    return ret;
}


/**
 * AVERAGE CIFTI ROWS ACROSS SUBJECTS BY ROI.
 *
 * Averages rows for each map of the ROI(s), across all files.  ROI maps are treated as weighting functions, including negative values.  For efficiency, ensure that everything that is not intended to be used is zero in the ROI map.  If -cifti-roi is specified, -left-roi, -right-roi, -cerebellum-roi, and -vol-roi must not be specified.  If multiple non-cifti ROI files are specified, they must have the same number of columns.
 *
 * @param cifti_out output cifti dscalar file
 * @param roi_metric weights to use for left hempsphere

the left roi as a metric file
 * @param roi_metric_ weights to use for right hempsphere

the right roi as a metric file
 * @param roi_metric_2 weights to use for cerebellum surface

the cerebellum roi as a metric file
 * @param roi_vol voxel weights to use

the roi volume file
 * @param left_surf specify the left surface for vertex area correction

the left surface file
 * @param right_surf specify the right surface for vertex area correction

the right surface file
 * @param cerebellum_surf specify the cerebellum surface for vertex area correction

the cerebellum surface file
 * @param cifti_roi cifti file containing combined weights
 * @param cifti specify an input cifti file
 * @param runner Command runner
 *
 * @returns NamedTuple of outputs (described in `CiftiAverageDenseRoiOutputs`).
 */
function cifti_average_dense_roi(
    cifti_out: string,
    roi_metric: InputPathType | null,
    roi_metric_: InputPathType | null,
    roi_metric_2: InputPathType | null,
    roi_vol: InputPathType | null,
    left_surf: InputPathType | null,
    right_surf: InputPathType | null,
    cerebellum_surf: InputPathType | null,
    cifti_roi: CiftiAverageDenseRoiCiftiRoiParamsDict | null = null,
    cifti: Array<CiftiAverageDenseRoiCiftiParamsDict> | null = null,
    runner: Runner | null = null,
): CiftiAverageDenseRoiOutputs {
    const params = cifti_average_dense_roi_params(cifti_out, roi_metric, roi_metric_, roi_metric_2, roi_vol, left_surf, right_surf, cerebellum_surf, cifti_roi, cifti)
    return cifti_average_dense_roi_execute(params, runner);
}


export {
      CIFTI_AVERAGE_DENSE_ROI_METADATA,
      CiftiAverageDenseRoiCiftiParamsDict,
      CiftiAverageDenseRoiCiftiParamsDictTagged,
      CiftiAverageDenseRoiCiftiRoiParamsDict,
      CiftiAverageDenseRoiCiftiRoiParamsDictTagged,
      CiftiAverageDenseRoiOutputs,
      CiftiAverageDenseRoiParamsDict,
      CiftiAverageDenseRoiParamsDictTagged,
      cifti_average_dense_roi,
      cifti_average_dense_roi_cifti,
      cifti_average_dense_roi_cifti_roi,
      cifti_average_dense_roi_execute,
      cifti_average_dense_roi_params,
};
