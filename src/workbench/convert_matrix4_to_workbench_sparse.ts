// This file was auto generated by Styx.
// Do not edit this file directly.

import { Runner, Execution, Metadata, InputPathType, OutputPathType, getGlobalRunner } from 'styxdefs';

const CONVERT_MATRIX4_TO_WORKBENCH_SPARSE_METADATA: Metadata = {
    id: "bb2236b447f9edba4ba2e429ee0ed0348145ebe7.workbench",
    name: "convert-matrix4-to-workbench-sparse",
    package: "workbench",
    container_image_tag: "nx10x/workbench:2.1.0",
};


interface ConvertMatrix4ToWorkbenchSparseVolumeSeedsParamsDict {
    "@type"?: "volume-seeds";
    "cifti-template": InputPathType;
    "direction": string;
}
type ConvertMatrix4ToWorkbenchSparseVolumeSeedsParamsDictTagged = Required<Pick<ConvertMatrix4ToWorkbenchSparseVolumeSeedsParamsDict, '@type'>> & ConvertMatrix4ToWorkbenchSparseVolumeSeedsParamsDict;


interface ConvertMatrix4ToWorkbenchSparseParamsDict {
    "@type"?: "workbench/convert-matrix4-to-workbench-sparse";
    "seed-roi"?: InputPathType | null | undefined;
    "volume-seeds"?: ConvertMatrix4ToWorkbenchSparseVolumeSeedsParamsDict | null | undefined;
    "matrix4_1": string;
    "matrix4_2": string;
    "matrix4_3": string;
    "orientation-file": InputPathType;
    "voxel-list": string;
    "wb-sparse-out": string;
}
type ConvertMatrix4ToWorkbenchSparseParamsDictTagged = Required<Pick<ConvertMatrix4ToWorkbenchSparseParamsDict, '@type'>> & ConvertMatrix4ToWorkbenchSparseParamsDict;


/**
 * Build parameters.
 *
 * @param cifti_template cifti file to use the volume mappings from
 * @param direction dimension along the cifti file to take the mapping from, ROW or COLUMN
 *
 * @returns Parameter dictionary
 */
function convert_matrix4_to_workbench_sparse_volume_seeds(
    cifti_template: InputPathType,
    direction: string,
): ConvertMatrix4ToWorkbenchSparseVolumeSeedsParamsDictTagged {
    const params = {
        "@type": "volume-seeds" as const,
        "cifti-template": cifti_template,
        "direction": direction,
    };
    return params;
}


/**
 * Build command-line arguments from parameters.
 *
 * @param params The parameters.
 * @param execution The execution object for resolving input paths.
 *
 * @returns Command-line arguments.
 */
function convert_matrix4_to_workbench_sparse_volume_seeds_cargs(
    params: ConvertMatrix4ToWorkbenchSparseVolumeSeedsParamsDict,
    execution: Execution,
): string[] {
    const cargs: string[] = [];
    cargs.push(
        "-volume-seeds",
        execution.inputFile((params["cifti-template"] ?? null)),
        (params["direction"] ?? null)
    );
    return cargs;
}


/**
 * Output object returned when calling `ConvertMatrix4ToWorkbenchSparseParamsDict(...)`.
 *
 * @interface
 */
interface ConvertMatrix4ToWorkbenchSparseOutputs {
    /**
     * Output root folder. This is the root folder for all outputs.
     */
    root: OutputPathType;
}


/**
 * Build parameters.
 *
 * @param matrix4_1 the first matrix4 file
 * @param matrix4_2 the second matrix4 file
 * @param matrix4_3 the third matrix4 file
 * @param orientation_file the .fiberTEMP.nii file this trajectory file applies to
 * @param voxel_list list of white matter voxel index triplets as used in the trajectory matrix
 * @param wb_sparse_out output - the output workbench sparse file
 * @param seed_roi specify the surface seed space

metric roi file of all vertices used in the seed space
 * @param volume_seeds specify the volume seed space
 *
 * @returns Parameter dictionary
 */
function convert_matrix4_to_workbench_sparse_params(
    matrix4_1: string,
    matrix4_2: string,
    matrix4_3: string,
    orientation_file: InputPathType,
    voxel_list: string,
    wb_sparse_out: string,
    seed_roi: InputPathType | null = null,
    volume_seeds: ConvertMatrix4ToWorkbenchSparseVolumeSeedsParamsDict | null = null,
): ConvertMatrix4ToWorkbenchSparseParamsDictTagged {
    const params = {
        "@type": "workbench/convert-matrix4-to-workbench-sparse" as const,
        "matrix4_1": matrix4_1,
        "matrix4_2": matrix4_2,
        "matrix4_3": matrix4_3,
        "orientation-file": orientation_file,
        "voxel-list": voxel_list,
        "wb-sparse-out": wb_sparse_out,
    };
    if (seed_roi !== null) {
        params["seed-roi"] = seed_roi;
    }
    if (volume_seeds !== null) {
        params["volume-seeds"] = volume_seeds;
    }
    return params;
}


/**
 * Build command-line arguments from parameters.
 *
 * @param params The parameters.
 * @param execution The execution object for resolving input paths.
 *
 * @returns Command-line arguments.
 */
function convert_matrix4_to_workbench_sparse_cargs(
    params: ConvertMatrix4ToWorkbenchSparseParamsDict,
    execution: Execution,
): string[] {
    const cargs: string[] = [];
    if ((params["seed-roi"] ?? null) !== null || (params["volume-seeds"] ?? null) !== null) {
        cargs.push(
            "wb_command",
            "-convert-matrix4-to-workbench-sparse",
            "-surface-seeds",
            (((params["seed-roi"] ?? null) !== null) ? execution.inputFile((params["seed-roi"] ?? null)) : ""),
            ...(((params["volume-seeds"] ?? null) !== null) ? convert_matrix4_to_workbench_sparse_volume_seeds_cargs((params["volume-seeds"] ?? null), execution) : [])
        );
    }
    cargs.push((params["matrix4_1"] ?? null));
    cargs.push((params["matrix4_2"] ?? null));
    cargs.push((params["matrix4_3"] ?? null));
    cargs.push(execution.inputFile((params["orientation-file"] ?? null)));
    cargs.push((params["voxel-list"] ?? null));
    cargs.push((params["wb-sparse-out"] ?? null));
    return cargs;
}


/**
 * Build outputs object containing output file paths and possibly stdout/stderr.
 *
 * @param params The parameters.
 * @param execution The execution object for resolving input paths.
 *
 * @returns Outputs object.
 */
function convert_matrix4_to_workbench_sparse_outputs(
    params: ConvertMatrix4ToWorkbenchSparseParamsDict,
    execution: Execution,
): ConvertMatrix4ToWorkbenchSparseOutputs {
    const ret: ConvertMatrix4ToWorkbenchSparseOutputs = {
        root: execution.outputFile("."),
    };
    return ret;
}


/**
 * CONVERT A 3-FILE MATRIX4 TO A WORKBENCH SPARSE FILE.
 *
 * Converts the matrix 4 output of probtrackx to workbench sparse file format.  Exactly one of -surface-seeds and -volume-seeds must be specified.
 *
 * @param params The parameters.
 * @param runner Command runner
 *
 * @returns NamedTuple of outputs (described in `ConvertMatrix4ToWorkbenchSparseOutputs`).
 */
function convert_matrix4_to_workbench_sparse_execute(
    params: ConvertMatrix4ToWorkbenchSparseParamsDict,
    runner: Runner | null = null,
): ConvertMatrix4ToWorkbenchSparseOutputs {
    runner = runner || getGlobalRunner();
    const execution = runner.startExecution(CONVERT_MATRIX4_TO_WORKBENCH_SPARSE_METADATA);
    params = execution.params(params)
    const cargs = convert_matrix4_to_workbench_sparse_cargs(params, execution)
    const ret = convert_matrix4_to_workbench_sparse_outputs(params, execution)
    execution.run(cargs, undefined);
    return ret;
}


/**
 * CONVERT A 3-FILE MATRIX4 TO A WORKBENCH SPARSE FILE.
 *
 * Converts the matrix 4 output of probtrackx to workbench sparse file format.  Exactly one of -surface-seeds and -volume-seeds must be specified.
 *
 * @param matrix4_1 the first matrix4 file
 * @param matrix4_2 the second matrix4 file
 * @param matrix4_3 the third matrix4 file
 * @param orientation_file the .fiberTEMP.nii file this trajectory file applies to
 * @param voxel_list list of white matter voxel index triplets as used in the trajectory matrix
 * @param wb_sparse_out output - the output workbench sparse file
 * @param seed_roi specify the surface seed space

metric roi file of all vertices used in the seed space
 * @param volume_seeds specify the volume seed space
 * @param runner Command runner
 *
 * @returns NamedTuple of outputs (described in `ConvertMatrix4ToWorkbenchSparseOutputs`).
 */
function convert_matrix4_to_workbench_sparse(
    matrix4_1: string,
    matrix4_2: string,
    matrix4_3: string,
    orientation_file: InputPathType,
    voxel_list: string,
    wb_sparse_out: string,
    seed_roi: InputPathType | null = null,
    volume_seeds: ConvertMatrix4ToWorkbenchSparseVolumeSeedsParamsDict | null = null,
    runner: Runner | null = null,
): ConvertMatrix4ToWorkbenchSparseOutputs {
    const params = convert_matrix4_to_workbench_sparse_params(matrix4_1, matrix4_2, matrix4_3, orientation_file, voxel_list, wb_sparse_out, seed_roi, volume_seeds)
    return convert_matrix4_to_workbench_sparse_execute(params, runner);
}


export {
      CONVERT_MATRIX4_TO_WORKBENCH_SPARSE_METADATA,
      ConvertMatrix4ToWorkbenchSparseOutputs,
      ConvertMatrix4ToWorkbenchSparseParamsDict,
      ConvertMatrix4ToWorkbenchSparseParamsDictTagged,
      ConvertMatrix4ToWorkbenchSparseVolumeSeedsParamsDict,
      ConvertMatrix4ToWorkbenchSparseVolumeSeedsParamsDictTagged,
      convert_matrix4_to_workbench_sparse,
      convert_matrix4_to_workbench_sparse_execute,
      convert_matrix4_to_workbench_sparse_params,
      convert_matrix4_to_workbench_sparse_volume_seeds,
};
