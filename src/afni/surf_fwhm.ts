// This file was auto generated by Styx.
// Do not edit this file directly.

import { Runner, Execution, Metadata, InputPathType, OutputPathType, getGlobalRunner } from 'styxdefs';

const SURF_FWHM_METADATA: Metadata = {
    id: "507940e5e4dbb09e2303be71339d44cbb0abc244.boutiques",
    name: "SurfFWHM",
    package: "afni",
    container_image_tag: "afni/afni_make_build:AFNI_24.2.06",
};


interface SurfFwhmParameters {
    "@type"?: "afni/SurfFWHM";
    "input_file": InputPathType;
    "mask"?: InputPathType | null | undefined;
    "surf_1"?: string | null | undefined;
    "surf_sphere"?: string | null | undefined;
    "clean": boolean;
    "detrend"?: number | null | undefined;
    "detpoly"?: number | null | undefined;
    "detprefix"?: string | null | undefined;
    "prefix"?: string | null | undefined;
    "vox_size"?: number | null | undefined;
    "neighborhood"?: number | null | undefined;
    "ok_warn": boolean;
    "examples": boolean;
    "slice": boolean;
}
type SurfFwhmParametersTagged = Required<Pick<SurfFwhmParameters, '@type'>> & SurfFwhmParameters;


/**
 * Output object returned when calling `SurfFwhmParameters(...)`.
 *
 * @interface
 */
interface SurfFwhmOutputs {
    /**
     * Output root folder. This is the root folder for all outputs.
     */
    root: OutputPathType;
    /**
     * Detrended dataset.
     */
    detrended_output: OutputPathType | null;
    /**
     * Main output dataset.
     */
    main_output: OutputPathType | null;
    /**
     * Histogram showing the distribution of local FWHM.
     */
    histogram_output: OutputPathType | null;
    /**
     * Mask output dataset.
     */
    mask_output: OutputPathType | null;
}


/**
 * Build parameters.
 *
 * @param input_file Dataset for which the FWHM is to be calculated.
 * @param mask Node mask so that only nodes in the mask are used to obtain estimates.
 * @param surf_1 Option for specifying the surface over which the input dataset is defined.
 * @param surf_sphere Spherical version of -SURF_1 for Local FWHM estimates.
 * @param clean Strip text from output to simplify parsing.
 * @param detrend Detrend to order 'q'. If q is not given, the program picks q=NT/30.
 * @param detpoly Detrend with polynomials of order p.
 * @param detprefix Save the detrended file into a dataset with prefix 'd'.
 * @param prefix Prefix of output data set.
 * @param vox_size Specify the nominal voxel size in mm.
 * @param neighborhood Neighborhood radius R for local FWHM estimates.
 * @param ok_warn Flag to set the mode to ok_warn.
 * @param examples Show command line examples and quit.
 * @param slice Use the contours from planar intersections to estimate gradients. For testing and development purposes only.
 *
 * @returns Parameter dictionary
 */
function surf_fwhm_params(
    input_file: InputPathType,
    mask: InputPathType | null = null,
    surf_1: string | null = null,
    surf_sphere: string | null = null,
    clean: boolean = false,
    detrend: number | null = null,
    detpoly: number | null = null,
    detprefix: string | null = null,
    prefix: string | null = null,
    vox_size: number | null = null,
    neighborhood: number | null = null,
    ok_warn: boolean = false,
    examples: boolean = false,
    slice: boolean = false,
): SurfFwhmParametersTagged {
    const params = {
        "@type": "afni/SurfFWHM" as const,
        "input_file": input_file,
        "clean": clean,
        "ok_warn": ok_warn,
        "examples": examples,
        "slice": slice,
    };
    if (mask !== null) {
        params["mask"] = mask;
    }
    if (surf_1 !== null) {
        params["surf_1"] = surf_1;
    }
    if (surf_sphere !== null) {
        params["surf_sphere"] = surf_sphere;
    }
    if (detrend !== null) {
        params["detrend"] = detrend;
    }
    if (detpoly !== null) {
        params["detpoly"] = detpoly;
    }
    if (detprefix !== null) {
        params["detprefix"] = detprefix;
    }
    if (prefix !== null) {
        params["prefix"] = prefix;
    }
    if (vox_size !== null) {
        params["vox_size"] = vox_size;
    }
    if (neighborhood !== null) {
        params["neighborhood"] = neighborhood;
    }
    return params;
}


/**
 * Build command-line arguments from parameters.
 *
 * @param params The parameters.
 * @param execution The execution object for resolving input paths.
 *
 * @returns Command-line arguments.
 */
function surf_fwhm_cargs(
    params: SurfFwhmParameters,
    execution: Execution,
): string[] {
    const cargs: string[] = [];
    cargs.push("SurfFWHM");
    cargs.push(execution.inputFile((params["input_file"] ?? null)));
    if ((params["mask"] ?? null) !== null) {
        cargs.push(
            "-MASK",
            execution.inputFile((params["mask"] ?? null))
        );
    }
    if ((params["surf_1"] ?? null) !== null) {
        cargs.push(
            "-SURF_1",
            (params["surf_1"] ?? null)
        );
    }
    if ((params["surf_sphere"] ?? null) !== null) {
        cargs.push(
            "-SURF_SPHERE",
            (params["surf_sphere"] ?? null)
        );
    }
    if ((params["clean"] ?? false)) {
        cargs.push("-clean");
    }
    if ((params["detrend"] ?? null) !== null) {
        cargs.push(
            "-detrend",
            String((params["detrend"] ?? null))
        );
    }
    if ((params["detpoly"] ?? null) !== null) {
        cargs.push(
            "-detpoly",
            String((params["detpoly"] ?? null))
        );
    }
    if ((params["detprefix"] ?? null) !== null) {
        cargs.push(
            "-detprefix",
            (params["detprefix"] ?? null)
        );
    }
    if ((params["prefix"] ?? null) !== null) {
        cargs.push(
            "-prefix",
            (params["prefix"] ?? null)
        );
    }
    if ((params["vox_size"] ?? null) !== null) {
        cargs.push(
            "-vox_size",
            String((params["vox_size"] ?? null))
        );
    }
    if ((params["neighborhood"] ?? null) !== null) {
        cargs.push(
            "-hood",
            String((params["neighborhood"] ?? null))
        );
    }
    if ((params["ok_warn"] ?? false)) {
        cargs.push("-ok_warn");
    }
    if ((params["examples"] ?? false)) {
        cargs.push("-examples");
    }
    if ((params["slice"] ?? false)) {
        cargs.push("-slice");
    }
    return cargs;
}


/**
 * Build outputs object containing output file paths and possibly stdout/stderr.
 *
 * @param params The parameters.
 * @param execution The execution object for resolving input paths.
 *
 * @returns Outputs object.
 */
function surf_fwhm_outputs(
    params: SurfFwhmParameters,
    execution: Execution,
): SurfFwhmOutputs {
    const ret: SurfFwhmOutputs = {
        root: execution.outputFile("."),
        detrended_output: ((params["prefix"] ?? null) !== null) ? execution.outputFile([(params["prefix"] ?? null), ".1D.dset"].join('')) : null,
        main_output: ((params["prefix"] ?? null) !== null) ? execution.outputFile([(params["prefix"] ?? null), ".nii.gz"].join('')) : null,
        histogram_output: ((params["prefix"] ?? null) !== null) ? execution.outputFile([(params["prefix"] ?? null), "_histog.1D"].join('')) : null,
        mask_output: ((params["prefix"] ?? null) !== null) ? execution.outputFile([(params["prefix"] ?? null), "_mask.nii.gz"].join('')) : null,
    };
    return ret;
}


/**
 * SurfFWHM
 *
 * A program for calculating local and global FWHM.
 *
 * Author: AFNI Developers
 *
 * URL: https://afni.nimh.nih.gov/
 *
 * @param params The parameters.
 * @param runner Command runner
 *
 * @returns NamedTuple of outputs (described in `SurfFwhmOutputs`).
 */
function surf_fwhm_execute(
    params: SurfFwhmParameters,
    runner: Runner | null = null,
): SurfFwhmOutputs {
    runner = runner || getGlobalRunner();
    const execution = runner.startExecution(SURF_FWHM_METADATA);
    params = execution.params(params)
    const cargs = surf_fwhm_cargs(params, execution)
    const ret = surf_fwhm_outputs(params, execution)
    execution.run(cargs, undefined);
    return ret;
}


/**
 * SurfFWHM
 *
 * A program for calculating local and global FWHM.
 *
 * Author: AFNI Developers
 *
 * URL: https://afni.nimh.nih.gov/
 *
 * @param input_file Dataset for which the FWHM is to be calculated.
 * @param mask Node mask so that only nodes in the mask are used to obtain estimates.
 * @param surf_1 Option for specifying the surface over which the input dataset is defined.
 * @param surf_sphere Spherical version of -SURF_1 for Local FWHM estimates.
 * @param clean Strip text from output to simplify parsing.
 * @param detrend Detrend to order 'q'. If q is not given, the program picks q=NT/30.
 * @param detpoly Detrend with polynomials of order p.
 * @param detprefix Save the detrended file into a dataset with prefix 'd'.
 * @param prefix Prefix of output data set.
 * @param vox_size Specify the nominal voxel size in mm.
 * @param neighborhood Neighborhood radius R for local FWHM estimates.
 * @param ok_warn Flag to set the mode to ok_warn.
 * @param examples Show command line examples and quit.
 * @param slice Use the contours from planar intersections to estimate gradients. For testing and development purposes only.
 * @param runner Command runner
 *
 * @returns NamedTuple of outputs (described in `SurfFwhmOutputs`).
 */
function surf_fwhm(
    input_file: InputPathType,
    mask: InputPathType | null = null,
    surf_1: string | null = null,
    surf_sphere: string | null = null,
    clean: boolean = false,
    detrend: number | null = null,
    detpoly: number | null = null,
    detprefix: string | null = null,
    prefix: string | null = null,
    vox_size: number | null = null,
    neighborhood: number | null = null,
    ok_warn: boolean = false,
    examples: boolean = false,
    slice: boolean = false,
    runner: Runner | null = null,
): SurfFwhmOutputs {
    const params = surf_fwhm_params(input_file, mask, surf_1, surf_sphere, clean, detrend, detpoly, detprefix, prefix, vox_size, neighborhood, ok_warn, examples, slice)
    return surf_fwhm_execute(params, runner);
}


export {
      SURF_FWHM_METADATA,
      SurfFwhmOutputs,
      surf_fwhm,
      surf_fwhm_execute,
      surf_fwhm_params,
};
