// This file was auto generated by Styx.
// Do not edit this file directly.

import { Runner, Execution, Metadata, InputPathType, OutputPathType, getGlobalRunner } from 'styxdefs';

const CIFTI_WEIGHTED_STATS_METADATA: Metadata = {
    id: "014a1bf95b4718c304bf3aa95e26fa00e131122c.workbench",
    name: "cifti-weighted-stats",
    package: "workbench",
    container_image_tag: "nx10x/workbench:2.1.0",
};


interface CiftiWeightedStatsSpatialWeightsParamsDict {
    "@type"?: "spatial-weights";
    "cerebellum-metric"?: InputPathType | null | undefined;
    "right-metric"?: InputPathType | null | undefined;
    "left-metric"?: InputPathType | null | undefined;
    "cerebellum-surf"?: InputPathType | null | undefined;
    "right-surf"?: InputPathType | null | undefined;
    "left-surf"?: InputPathType | null | undefined;
}
type CiftiWeightedStatsSpatialWeightsParamsDictTagged = Required<Pick<CiftiWeightedStatsSpatialWeightsParamsDict, '@type'>> & CiftiWeightedStatsSpatialWeightsParamsDict;


interface CiftiWeightedStatsRoiParamsDict {
    "@type"?: "roi";
    "roi-cifti": InputPathType;
    "match-maps": boolean;
}
type CiftiWeightedStatsRoiParamsDictTagged = Required<Pick<CiftiWeightedStatsRoiParamsDict, '@type'>> & CiftiWeightedStatsRoiParamsDict;


interface CiftiWeightedStatsParamsDict {
    "@type"?: "workbench/cifti-weighted-stats";
    "cifti-in": InputPathType;
    "spatial-weights"?: CiftiWeightedStatsSpatialWeightsParamsDict | null | undefined;
    "roi"?: CiftiWeightedStatsRoiParamsDict | null | undefined;
    "percent"?: number | null | undefined;
    "sample"?: boolean | null | undefined;
    "column"?: number | null | undefined;
    "weight-cifti"?: InputPathType | null | undefined;
    "show-map-name": boolean;
    "sum": boolean;
    "mean": boolean;
}
type CiftiWeightedStatsParamsDictTagged = Required<Pick<CiftiWeightedStatsParamsDict, '@type'>> & CiftiWeightedStatsParamsDict;


/**
 * Build parameters.
 *
 * @param cerebellum_metric use a metric file for cerebellum vertex areas

metric file containing cerebellum vertex areas
 * @param right_metric use a metric file for right vertex areas

metric file containing right vertex areas
 * @param left_metric use a metric file for left vertex areas

metric file containing left vertex areas
 * @param cerebellum_surf use a surface for cerebellum vertex areas

the cerebellum surface to use, areas are in mm^2
 * @param right_surf use a surface for right vertex areas

the right surface to use, areas are in mm^2
 * @param left_surf use a surface for left vertex areas

the left surface to use, areas are in mm^2
 *
 * @returns Parameter dictionary
 */
function cifti_weighted_stats_spatial_weights(
    cerebellum_metric: InputPathType | null = null,
    right_metric: InputPathType | null = null,
    left_metric: InputPathType | null = null,
    cerebellum_surf: InputPathType | null = null,
    right_surf: InputPathType | null = null,
    left_surf: InputPathType | null = null,
): CiftiWeightedStatsSpatialWeightsParamsDictTagged {
    const params = {
        "@type": "spatial-weights" as const,
    };
    if (cerebellum_metric !== null) {
        params["cerebellum-metric"] = cerebellum_metric;
    }
    if (right_metric !== null) {
        params["right-metric"] = right_metric;
    }
    if (left_metric !== null) {
        params["left-metric"] = left_metric;
    }
    if (cerebellum_surf !== null) {
        params["cerebellum-surf"] = cerebellum_surf;
    }
    if (right_surf !== null) {
        params["right-surf"] = right_surf;
    }
    if (left_surf !== null) {
        params["left-surf"] = left_surf;
    }
    return params;
}


/**
 * Build command-line arguments from parameters.
 *
 * @param params The parameters.
 * @param execution The execution object for resolving input paths.
 *
 * @returns Command-line arguments.
 */
function cifti_weighted_stats_spatial_weights_cargs(
    params: CiftiWeightedStatsSpatialWeightsParamsDict,
    execution: Execution,
): string[] {
    const cargs: string[] = [];
    cargs.push("-spatial-weights");
    if ((params["cerebellum-metric"] ?? null) !== null) {
        cargs.push(
            "-cerebellum-area-metric",
            execution.inputFile((params["cerebellum-metric"] ?? null))
        );
    }
    if ((params["right-metric"] ?? null) !== null) {
        cargs.push(
            "-right-area-metric",
            execution.inputFile((params["right-metric"] ?? null))
        );
    }
    if ((params["left-metric"] ?? null) !== null) {
        cargs.push(
            "-left-area-metric",
            execution.inputFile((params["left-metric"] ?? null))
        );
    }
    if ((params["cerebellum-surf"] ?? null) !== null) {
        cargs.push(
            "-cerebellum-area-surf",
            execution.inputFile((params["cerebellum-surf"] ?? null))
        );
    }
    if ((params["right-surf"] ?? null) !== null) {
        cargs.push(
            "-right-area-surf",
            execution.inputFile((params["right-surf"] ?? null))
        );
    }
    if ((params["left-surf"] ?? null) !== null) {
        cargs.push(
            "-left-area-surf",
            execution.inputFile((params["left-surf"] ?? null))
        );
    }
    return cargs;
}


/**
 * Build parameters.
 *
 * @param roi_cifti the roi, as a cifti file
 * @param match_maps each column of input uses the corresponding column from the roi file
 *
 * @returns Parameter dictionary
 */
function cifti_weighted_stats_roi(
    roi_cifti: InputPathType,
    match_maps: boolean = false,
): CiftiWeightedStatsRoiParamsDictTagged {
    const params = {
        "@type": "roi" as const,
        "roi-cifti": roi_cifti,
        "match-maps": match_maps,
    };
    return params;
}


/**
 * Build command-line arguments from parameters.
 *
 * @param params The parameters.
 * @param execution The execution object for resolving input paths.
 *
 * @returns Command-line arguments.
 */
function cifti_weighted_stats_roi_cargs(
    params: CiftiWeightedStatsRoiParamsDict,
    execution: Execution,
): string[] {
    const cargs: string[] = [];
    cargs.push(
        "-roi",
        execution.inputFile((params["roi-cifti"] ?? null))
    );
    if ((params["match-maps"] ?? false)) {
        cargs.push("-match-maps");
    }
    return cargs;
}


/**
 * Output object returned when calling `CiftiWeightedStatsParamsDict(...)`.
 *
 * @interface
 */
interface CiftiWeightedStatsOutputs {
    /**
     * Output root folder. This is the root folder for all outputs.
     */
    root: OutputPathType;
}


/**
 * Build parameters.
 *
 * @param cifti_in the input cifti
 * @param spatial_weights use vertex area and voxel volume as weights
 * @param roi only consider data inside an roi
 * @param percent compute weighted percentile

the percentile to find, must be between 0 and 100
 * @param sample compute weighted standard deviation

estimate population stdev from the sample
 * @param column only display output for one column

the column to use (1-based)
 * @param weight_cifti use a cifti file containing weights

the weights to use, as a cifti file
 * @param show_map_name print map index and name before each output
 * @param sum compute weighted sum
 * @param mean compute weighted mean
 *
 * @returns Parameter dictionary
 */
function cifti_weighted_stats_params(
    cifti_in: InputPathType,
    spatial_weights: CiftiWeightedStatsSpatialWeightsParamsDict | null = null,
    roi: CiftiWeightedStatsRoiParamsDict | null = null,
    percent: number | null = null,
    sample: boolean | null = null,
    column: number | null = null,
    weight_cifti: InputPathType | null = null,
    show_map_name: boolean = false,
    sum: boolean = false,
    mean: boolean = false,
): CiftiWeightedStatsParamsDictTagged {
    const params = {
        "@type": "workbench/cifti-weighted-stats" as const,
        "cifti-in": cifti_in,
        "show-map-name": show_map_name,
        "sum": sum,
        "mean": mean,
    };
    if (spatial_weights !== null) {
        params["spatial-weights"] = spatial_weights;
    }
    if (roi !== null) {
        params["roi"] = roi;
    }
    if (percent !== null) {
        params["percent"] = percent;
    }
    if (sample !== null) {
        params["sample"] = sample;
    }
    if (column !== null) {
        params["column"] = column;
    }
    if (weight_cifti !== null) {
        params["weight-cifti"] = weight_cifti;
    }
    return params;
}


/**
 * Build command-line arguments from parameters.
 *
 * @param params The parameters.
 * @param execution The execution object for resolving input paths.
 *
 * @returns Command-line arguments.
 */
function cifti_weighted_stats_cargs(
    params: CiftiWeightedStatsParamsDict,
    execution: Execution,
): string[] {
    const cargs: string[] = [];
    cargs.push(
        "wb_command",
        "-cifti-weighted-stats"
    );
    cargs.push(execution.inputFile((params["cifti-in"] ?? null)));
    if ((params["spatial-weights"] ?? null) !== null || (params["roi"] ?? null) !== null) {
        cargs.push(
            ...(((params["spatial-weights"] ?? null) !== null) ? cifti_weighted_stats_spatial_weights_cargs((params["spatial-weights"] ?? null), execution) : []),
            ...(((params["roi"] ?? null) !== null) ? cifti_weighted_stats_roi_cargs((params["roi"] ?? null), execution) : [])
        );
    }
    if ((params["percent"] ?? null) !== null) {
        cargs.push(
            "-percentile",
            String((params["percent"] ?? null))
        );
    }
    if ((params["sample"] ?? null) !== null) {
        cargs.push(
            "-stdev",
            "-sample"
        );
    }
    if ((params["column"] ?? null) !== null) {
        cargs.push(
            "-column",
            String((params["column"] ?? null))
        );
    }
    if ((params["weight-cifti"] ?? null) !== null) {
        cargs.push(
            "-cifti-weights",
            execution.inputFile((params["weight-cifti"] ?? null))
        );
    }
    if ((params["show-map-name"] ?? false)) {
        cargs.push("-show-map-name");
    }
    if ((params["sum"] ?? false)) {
        cargs.push("-sum");
    }
    if ((params["mean"] ?? false)) {
        cargs.push("-mean");
    }
    return cargs;
}


/**
 * Build outputs object containing output file paths and possibly stdout/stderr.
 *
 * @param params The parameters.
 * @param execution The execution object for resolving input paths.
 *
 * @returns Outputs object.
 */
function cifti_weighted_stats_outputs(
    params: CiftiWeightedStatsParamsDict,
    execution: Execution,
): CiftiWeightedStatsOutputs {
    const ret: CiftiWeightedStatsOutputs = {
        root: execution.outputFile("."),
    };
    return ret;
}


/**
 * WEIGHTED STATISTICS ALONG CIFTI COLUMNS.
 *
 * If the mapping along column is brain models, for each column of the input, the specified operation is done on each surface and across all voxels, and the results are printed on separate lines.  For other mapping types, the operation is done on each column, and one line per map is printed.  Exactly one of -spatial-weights or -cifti-weights must be specified.  Use -column to only give output for a single column.  If the -roi option is used without -match-maps, then each line will contain as many numbers as there are maps in the ROI file, separated by tab characters.  Exactly one of -mean, -stdev, -percentile or -sum must be specified.
 *
 * Using -sum with -spatial-weights (or with -cifti-weights and a cifti containing weights of similar meaning) is equivalent to integrating with respect to area and volume.  When the input is binary ROIs, this will therefore output the area or volume of each ROI.
 *
 * @param params The parameters.
 * @param runner Command runner
 *
 * @returns NamedTuple of outputs (described in `CiftiWeightedStatsOutputs`).
 */
function cifti_weighted_stats_execute(
    params: CiftiWeightedStatsParamsDict,
    runner: Runner | null = null,
): CiftiWeightedStatsOutputs {
    runner = runner || getGlobalRunner();
    const execution = runner.startExecution(CIFTI_WEIGHTED_STATS_METADATA);
    params = execution.params(params)
    const cargs = cifti_weighted_stats_cargs(params, execution)
    const ret = cifti_weighted_stats_outputs(params, execution)
    execution.run(cargs, undefined);
    return ret;
}


/**
 * WEIGHTED STATISTICS ALONG CIFTI COLUMNS.
 *
 * If the mapping along column is brain models, for each column of the input, the specified operation is done on each surface and across all voxels, and the results are printed on separate lines.  For other mapping types, the operation is done on each column, and one line per map is printed.  Exactly one of -spatial-weights or -cifti-weights must be specified.  Use -column to only give output for a single column.  If the -roi option is used without -match-maps, then each line will contain as many numbers as there are maps in the ROI file, separated by tab characters.  Exactly one of -mean, -stdev, -percentile or -sum must be specified.
 *
 * Using -sum with -spatial-weights (or with -cifti-weights and a cifti containing weights of similar meaning) is equivalent to integrating with respect to area and volume.  When the input is binary ROIs, this will therefore output the area or volume of each ROI.
 *
 * @param cifti_in the input cifti
 * @param spatial_weights use vertex area and voxel volume as weights
 * @param roi only consider data inside an roi
 * @param percent compute weighted percentile

the percentile to find, must be between 0 and 100
 * @param sample compute weighted standard deviation

estimate population stdev from the sample
 * @param column only display output for one column

the column to use (1-based)
 * @param weight_cifti use a cifti file containing weights

the weights to use, as a cifti file
 * @param show_map_name print map index and name before each output
 * @param sum compute weighted sum
 * @param mean compute weighted mean
 * @param runner Command runner
 *
 * @returns NamedTuple of outputs (described in `CiftiWeightedStatsOutputs`).
 */
function cifti_weighted_stats(
    cifti_in: InputPathType,
    spatial_weights: CiftiWeightedStatsSpatialWeightsParamsDict | null = null,
    roi: CiftiWeightedStatsRoiParamsDict | null = null,
    percent: number | null = null,
    sample: boolean | null = null,
    column: number | null = null,
    weight_cifti: InputPathType | null = null,
    show_map_name: boolean = false,
    sum: boolean = false,
    mean: boolean = false,
    runner: Runner | null = null,
): CiftiWeightedStatsOutputs {
    const params = cifti_weighted_stats_params(cifti_in, spatial_weights, roi, percent, sample, column, weight_cifti, show_map_name, sum, mean)
    return cifti_weighted_stats_execute(params, runner);
}


export {
      CIFTI_WEIGHTED_STATS_METADATA,
      CiftiWeightedStatsOutputs,
      CiftiWeightedStatsParamsDict,
      CiftiWeightedStatsParamsDictTagged,
      CiftiWeightedStatsRoiParamsDict,
      CiftiWeightedStatsRoiParamsDictTagged,
      CiftiWeightedStatsSpatialWeightsParamsDict,
      CiftiWeightedStatsSpatialWeightsParamsDictTagged,
      cifti_weighted_stats,
      cifti_weighted_stats_execute,
      cifti_weighted_stats_params,
      cifti_weighted_stats_roi,
      cifti_weighted_stats_spatial_weights,
};
