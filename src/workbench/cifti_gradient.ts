// This file was auto generated by Styx.
// Do not edit this file directly.

import { Runner, Execution, Metadata, InputPathType, OutputPathType, getGlobalRunner } from 'styxdefs';

const CIFTI_GRADIENT_METADATA: Metadata = {
    id: "d2460b1cd46e52f13e61657937e6834a86e13b49.workbench",
    name: "cifti-gradient",
    package: "workbench",
    container_image_tag: "nx10x/workbench:2.1.0",
};


interface CiftiGradientLeftSurfaceParamsDict {
    "@type"?: "left-surface";
    "surface": InputPathType;
    "area-metric"?: InputPathType | null | undefined;
}
type CiftiGradientLeftSurfaceParamsDictTagged = Required<Pick<CiftiGradientLeftSurfaceParamsDict, '@type'>> & CiftiGradientLeftSurfaceParamsDict;


interface CiftiGradientRightSurfaceParamsDict {
    "@type"?: "right-surface";
    "surface": InputPathType;
    "area-metric"?: InputPathType | null | undefined;
}
type CiftiGradientRightSurfaceParamsDictTagged = Required<Pick<CiftiGradientRightSurfaceParamsDict, '@type'>> & CiftiGradientRightSurfaceParamsDict;


interface CiftiGradientCerebellumSurfaceParamsDict {
    "@type"?: "cerebellum-surface";
    "surface": InputPathType;
    "area-metric"?: InputPathType | null | undefined;
}
type CiftiGradientCerebellumSurfaceParamsDictTagged = Required<Pick<CiftiGradientCerebellumSurfaceParamsDict, '@type'>> & CiftiGradientCerebellumSurfaceParamsDict;


interface CiftiGradientVectorsParamsDict {
    "@type"?: "vectors";
    "vectors-out": string;
}
type CiftiGradientVectorsParamsDictTagged = Required<Pick<CiftiGradientVectorsParamsDict, '@type'>> & CiftiGradientVectorsParamsDict;


interface CiftiGradientSurfaceParamsDict {
    "@type"?: "surface";
    "structure": string;
    "surface": InputPathType;
    "area-metric"?: InputPathType | null | undefined;
}
type CiftiGradientSurfaceParamsDictTagged = Required<Pick<CiftiGradientSurfaceParamsDict, '@type'>> & CiftiGradientSurfaceParamsDict;


interface CiftiGradientParamsDict {
    "@type"?: "workbench/cifti-gradient";
    "cifti-out": string;
    "left-surface"?: CiftiGradientLeftSurfaceParamsDict | null | undefined;
    "right-surface"?: CiftiGradientRightSurfaceParamsDict | null | undefined;
    "cerebellum-surface"?: CiftiGradientCerebellumSurfaceParamsDict | null | undefined;
    "vectors"?: CiftiGradientVectorsParamsDict | null | undefined;
    "surface"?: Array<CiftiGradientSurfaceParamsDict> | null | undefined;
    "volume-kernel"?: number | null | undefined;
    "surface-kernel"?: number | null | undefined;
    "average-output": boolean;
    "presmooth-fwhm": boolean;
    "cifti": InputPathType;
    "direction": string;
}
type CiftiGradientParamsDictTagged = Required<Pick<CiftiGradientParamsDict, '@type'>> & CiftiGradientParamsDict;


/**
 * Build parameters.
 *
 * @param surface the left surface file
 * @param area_metric vertex areas to use instead of computing them from the left surface

the corrected vertex areas, as a metric
 *
 * @returns Parameter dictionary
 */
function cifti_gradient_left_surface(
    surface: InputPathType,
    area_metric: InputPathType | null = null,
): CiftiGradientLeftSurfaceParamsDictTagged {
    const params = {
        "@type": "left-surface" as const,
        "surface": surface,
    };
    if (area_metric !== null) {
        params["area-metric"] = area_metric;
    }
    return params;
}


/**
 * Build command-line arguments from parameters.
 *
 * @param params The parameters.
 * @param execution The execution object for resolving input paths.
 *
 * @returns Command-line arguments.
 */
function cifti_gradient_left_surface_cargs(
    params: CiftiGradientLeftSurfaceParamsDict,
    execution: Execution,
): string[] {
    const cargs: string[] = [];
    cargs.push(
        "-left-surface",
        execution.inputFile((params["surface"] ?? null))
    );
    if ((params["area-metric"] ?? null) !== null) {
        cargs.push(
            "-left-corrected-areas",
            execution.inputFile((params["area-metric"] ?? null))
        );
    }
    return cargs;
}


/**
 * Build parameters.
 *
 * @param surface the right surface file
 * @param area_metric vertex areas to use instead of computing them from the right surface

the corrected vertex areas, as a metric
 *
 * @returns Parameter dictionary
 */
function cifti_gradient_right_surface(
    surface: InputPathType,
    area_metric: InputPathType | null = null,
): CiftiGradientRightSurfaceParamsDictTagged {
    const params = {
        "@type": "right-surface" as const,
        "surface": surface,
    };
    if (area_metric !== null) {
        params["area-metric"] = area_metric;
    }
    return params;
}


/**
 * Build command-line arguments from parameters.
 *
 * @param params The parameters.
 * @param execution The execution object for resolving input paths.
 *
 * @returns Command-line arguments.
 */
function cifti_gradient_right_surface_cargs(
    params: CiftiGradientRightSurfaceParamsDict,
    execution: Execution,
): string[] {
    const cargs: string[] = [];
    cargs.push(
        "-right-surface",
        execution.inputFile((params["surface"] ?? null))
    );
    if ((params["area-metric"] ?? null) !== null) {
        cargs.push(
            "-right-corrected-areas",
            execution.inputFile((params["area-metric"] ?? null))
        );
    }
    return cargs;
}


/**
 * Build parameters.
 *
 * @param surface the cerebellum surface file
 * @param area_metric vertex areas to use instead of computing them from the cerebellum surface

the corrected vertex areas, as a metric
 *
 * @returns Parameter dictionary
 */
function cifti_gradient_cerebellum_surface(
    surface: InputPathType,
    area_metric: InputPathType | null = null,
): CiftiGradientCerebellumSurfaceParamsDictTagged {
    const params = {
        "@type": "cerebellum-surface" as const,
        "surface": surface,
    };
    if (area_metric !== null) {
        params["area-metric"] = area_metric;
    }
    return params;
}


/**
 * Build command-line arguments from parameters.
 *
 * @param params The parameters.
 * @param execution The execution object for resolving input paths.
 *
 * @returns Command-line arguments.
 */
function cifti_gradient_cerebellum_surface_cargs(
    params: CiftiGradientCerebellumSurfaceParamsDict,
    execution: Execution,
): string[] {
    const cargs: string[] = [];
    cargs.push(
        "-cerebellum-surface",
        execution.inputFile((params["surface"] ?? null))
    );
    if ((params["area-metric"] ?? null) !== null) {
        cargs.push(
            "-cerebellum-corrected-areas",
            execution.inputFile((params["area-metric"] ?? null))
        );
    }
    return cargs;
}


/**
 * Output object returned when calling `CiftiGradientVectorsParamsDict | null(...)`.
 *
 * @interface
 */
interface CiftiGradientVectorsOutputs {
    /**
     * Output root folder. This is the root folder for all outputs.
     */
    root: OutputPathType;
    /**
     * the vectors, as a dscalar file
     */
    vectors_out: OutputPathType;
}


/**
 * Build parameters.
 *
 * @param vectors_out the vectors, as a dscalar file
 *
 * @returns Parameter dictionary
 */
function cifti_gradient_vectors(
    vectors_out: string,
): CiftiGradientVectorsParamsDictTagged {
    const params = {
        "@type": "vectors" as const,
        "vectors-out": vectors_out,
    };
    return params;
}


/**
 * Build command-line arguments from parameters.
 *
 * @param params The parameters.
 * @param execution The execution object for resolving input paths.
 *
 * @returns Command-line arguments.
 */
function cifti_gradient_vectors_cargs(
    params: CiftiGradientVectorsParamsDict,
    execution: Execution,
): string[] {
    const cargs: string[] = [];
    cargs.push(
        "-vectors",
        (params["vectors-out"] ?? null)
    );
    return cargs;
}


/**
 * Build outputs object containing output file paths and possibly stdout/stderr.
 *
 * @param params The parameters.
 * @param execution The execution object for resolving input paths.
 *
 * @returns Outputs object.
 */
function cifti_gradient_vectors_outputs(
    params: CiftiGradientVectorsParamsDict,
    execution: Execution,
): CiftiGradientVectorsOutputs {
    const ret: CiftiGradientVectorsOutputs = {
        root: execution.outputFile("."),
        vectors_out: execution.outputFile([(params["vectors-out"] ?? null)].join('')),
    };
    return ret;
}


/**
 * Build parameters.
 *
 * @param structure the surface structure name
 * @param surface the surface file
 * @param area_metric vertex areas to use instead of computing them from the surface

the corrected vertex areas, as a metric
 *
 * @returns Parameter dictionary
 */
function cifti_gradient_surface(
    structure: string,
    surface: InputPathType,
    area_metric: InputPathType | null = null,
): CiftiGradientSurfaceParamsDictTagged {
    const params = {
        "@type": "surface" as const,
        "structure": structure,
        "surface": surface,
    };
    if (area_metric !== null) {
        params["area-metric"] = area_metric;
    }
    return params;
}


/**
 * Build command-line arguments from parameters.
 *
 * @param params The parameters.
 * @param execution The execution object for resolving input paths.
 *
 * @returns Command-line arguments.
 */
function cifti_gradient_surface_cargs(
    params: CiftiGradientSurfaceParamsDict,
    execution: Execution,
): string[] {
    const cargs: string[] = [];
    cargs.push(
        "-surface",
        (params["structure"] ?? null),
        execution.inputFile((params["surface"] ?? null))
    );
    if ((params["area-metric"] ?? null) !== null) {
        cargs.push(
            "-corrected-areas",
            execution.inputFile((params["area-metric"] ?? null))
        );
    }
    return cargs;
}


/**
 * Output object returned when calling `CiftiGradientParamsDict(...)`.
 *
 * @interface
 */
interface CiftiGradientOutputs {
    /**
     * Output root folder. This is the root folder for all outputs.
     */
    root: OutputPathType;
    /**
     * the output cifti
     */
    cifti_out: OutputPathType;
    /**
     * Outputs from `cifti_gradient_vectors_outputs`.
     */
    vectors: CiftiGradientVectorsOutputs | null;
}


/**
 * Build parameters.
 *
 * @param cifti_out the output cifti
 * @param cifti the input cifti
 * @param direction which dimension to take the gradient along, ROW or COLUMN
 * @param left_surface specify the left surface to use
 * @param right_surface specify the right surface to use
 * @param cerebellum_surface specify the cerebellum surface to use
 * @param vectors output gradient vectors
 * @param surface specify a surface by structure name
 * @param volume_kernel smooth on the surface before computing the gradient

the size of the gaussian volume smoothing kernel in mm, as sigma by default
 * @param surface_kernel smooth on the surface before computing the gradient

the size of the gaussian surface smoothing kernel in mm, as sigma by default
 * @param average_output output the average of the gradient magnitude maps instead of each gradient map separately
 * @param presmooth_fwhm smoothing kernel sizes are FWHM, not sigma
 *
 * @returns Parameter dictionary
 */
function cifti_gradient_params(
    cifti_out: string,
    cifti: InputPathType,
    direction: string,
    left_surface: CiftiGradientLeftSurfaceParamsDict | null = null,
    right_surface: CiftiGradientRightSurfaceParamsDict | null = null,
    cerebellum_surface: CiftiGradientCerebellumSurfaceParamsDict | null = null,
    vectors: CiftiGradientVectorsParamsDict | null = null,
    surface: Array<CiftiGradientSurfaceParamsDict> | null = null,
    volume_kernel: number | null = null,
    surface_kernel: number | null = null,
    average_output: boolean = false,
    presmooth_fwhm: boolean = false,
): CiftiGradientParamsDictTagged {
    const params = {
        "@type": "workbench/cifti-gradient" as const,
        "cifti-out": cifti_out,
        "average-output": average_output,
        "presmooth-fwhm": presmooth_fwhm,
        "cifti": cifti,
        "direction": direction,
    };
    if (left_surface !== null) {
        params["left-surface"] = left_surface;
    }
    if (right_surface !== null) {
        params["right-surface"] = right_surface;
    }
    if (cerebellum_surface !== null) {
        params["cerebellum-surface"] = cerebellum_surface;
    }
    if (vectors !== null) {
        params["vectors"] = vectors;
    }
    if (surface !== null) {
        params["surface"] = surface;
    }
    if (volume_kernel !== null) {
        params["volume-kernel"] = volume_kernel;
    }
    if (surface_kernel !== null) {
        params["surface-kernel"] = surface_kernel;
    }
    return params;
}


/**
 * Build command-line arguments from parameters.
 *
 * @param params The parameters.
 * @param execution The execution object for resolving input paths.
 *
 * @returns Command-line arguments.
 */
function cifti_gradient_cargs(
    params: CiftiGradientParamsDict,
    execution: Execution,
): string[] {
    const cargs: string[] = [];
    cargs.push(
        "wb_command",
        "-cifti-gradient"
    );
    cargs.push(
        (params["cifti-out"] ?? null),
        ...(((params["left-surface"] ?? null) !== null) ? cifti_gradient_left_surface_cargs((params["left-surface"] ?? null), execution) : []),
        ...(((params["right-surface"] ?? null) !== null) ? cifti_gradient_right_surface_cargs((params["right-surface"] ?? null), execution) : []),
        ...(((params["cerebellum-surface"] ?? null) !== null) ? cifti_gradient_cerebellum_surface_cargs((params["cerebellum-surface"] ?? null), execution) : []),
        ...(((params["vectors"] ?? null) !== null) ? cifti_gradient_vectors_cargs((params["vectors"] ?? null), execution) : []),
        ...(((params["surface"] ?? null) !== null) ? (params["surface"] ?? null).map(s => cifti_gradient_surface_cargs(s, execution)).flat() : [])
    );
    if ((params["volume-kernel"] ?? null) !== null) {
        cargs.push(
            "-volume-presmooth",
            String((params["volume-kernel"] ?? null))
        );
    }
    if ((params["surface-kernel"] ?? null) !== null) {
        cargs.push(
            "-surface-presmooth",
            String((params["surface-kernel"] ?? null))
        );
    }
    if ((params["average-output"] ?? false)) {
        cargs.push("-average-output");
    }
    if ((params["presmooth-fwhm"] ?? false)) {
        cargs.push("-presmooth-fwhm");
    }
    cargs.push(execution.inputFile((params["cifti"] ?? null)));
    cargs.push((params["direction"] ?? null));
    return cargs;
}


/**
 * Build outputs object containing output file paths and possibly stdout/stderr.
 *
 * @param params The parameters.
 * @param execution The execution object for resolving input paths.
 *
 * @returns Outputs object.
 */
function cifti_gradient_outputs(
    params: CiftiGradientParamsDict,
    execution: Execution,
): CiftiGradientOutputs {
    const ret: CiftiGradientOutputs = {
        root: execution.outputFile("."),
        cifti_out: execution.outputFile([(params["cifti-out"] ?? null)].join('')),
        vectors: (params["vectors"] ?? null) ? (cifti_gradient_vectors_outputs((params["vectors"] ?? null), execution) ?? null) : null,
    };
    return ret;
}


/**
 * TAKE GRADIENT OF A CIFTI FILE.
 *
 * Performs gradient calculation on each component of the cifti file, and optionally averages the resulting gradients.  The -vectors and -average-output options may not be used together.  You must specify a surface for each surface structure in the cifti file.  The COLUMN direction should be faster, and is the direction that works on dtseries.  For dconn, you probably want ROW, unless you are using -average-output.
 *
 * The <structure> argument to -surface must be one of the following strings:
 *
 * CORTEX_LEFT
 * CORTEX_RIGHT
 * CEREBELLUM
 * ACCUMBENS_LEFT
 * ACCUMBENS_RIGHT
 * ALL_GREY_MATTER
 * ALL_WHITE_MATTER
 * AMYGDALA_LEFT
 * AMYGDALA_RIGHT
 * BRAIN_STEM
 * CAUDATE_LEFT
 * CAUDATE_RIGHT
 * CEREBELLAR_WHITE_MATTER_LEFT
 * CEREBELLAR_WHITE_MATTER_RIGHT
 * CEREBELLUM_LEFT
 * CEREBELLUM_RIGHT
 * CEREBRAL_WHITE_MATTER_LEFT
 * CEREBRAL_WHITE_MATTER_RIGHT
 * CORTEX
 * DIENCEPHALON_VENTRAL_LEFT
 * DIENCEPHALON_VENTRAL_RIGHT
 * HIPPOCAMPUS_LEFT
 * HIPPOCAMPUS_RIGHT
 * HIPPOCAMPUS_DENTATE_LEFT
 * HIPPOCAMPUS_DENTATE_RIGHT
 * INVALID
 * OTHER
 * OTHER_GREY_MATTER
 * OTHER_WHITE_MATTER
 * PALLIDUM_LEFT
 * PALLIDUM_RIGHT
 * PUTAMEN_LEFT
 * PUTAMEN_RIGHT
 * THALAMUS_LEFT
 * THALAMUS_RIGHT.
 *
 * @param params The parameters.
 * @param runner Command runner
 *
 * @returns NamedTuple of outputs (described in `CiftiGradientOutputs`).
 */
function cifti_gradient_execute(
    params: CiftiGradientParamsDict,
    runner: Runner | null = null,
): CiftiGradientOutputs {
    runner = runner || getGlobalRunner();
    const execution = runner.startExecution(CIFTI_GRADIENT_METADATA);
    params = execution.params(params)
    const cargs = cifti_gradient_cargs(params, execution)
    const ret = cifti_gradient_outputs(params, execution)
    execution.run(cargs, undefined);
    return ret;
}


/**
 * TAKE GRADIENT OF A CIFTI FILE.
 *
 * Performs gradient calculation on each component of the cifti file, and optionally averages the resulting gradients.  The -vectors and -average-output options may not be used together.  You must specify a surface for each surface structure in the cifti file.  The COLUMN direction should be faster, and is the direction that works on dtseries.  For dconn, you probably want ROW, unless you are using -average-output.
 *
 * The <structure> argument to -surface must be one of the following strings:
 *
 * CORTEX_LEFT
 * CORTEX_RIGHT
 * CEREBELLUM
 * ACCUMBENS_LEFT
 * ACCUMBENS_RIGHT
 * ALL_GREY_MATTER
 * ALL_WHITE_MATTER
 * AMYGDALA_LEFT
 * AMYGDALA_RIGHT
 * BRAIN_STEM
 * CAUDATE_LEFT
 * CAUDATE_RIGHT
 * CEREBELLAR_WHITE_MATTER_LEFT
 * CEREBELLAR_WHITE_MATTER_RIGHT
 * CEREBELLUM_LEFT
 * CEREBELLUM_RIGHT
 * CEREBRAL_WHITE_MATTER_LEFT
 * CEREBRAL_WHITE_MATTER_RIGHT
 * CORTEX
 * DIENCEPHALON_VENTRAL_LEFT
 * DIENCEPHALON_VENTRAL_RIGHT
 * HIPPOCAMPUS_LEFT
 * HIPPOCAMPUS_RIGHT
 * HIPPOCAMPUS_DENTATE_LEFT
 * HIPPOCAMPUS_DENTATE_RIGHT
 * INVALID
 * OTHER
 * OTHER_GREY_MATTER
 * OTHER_WHITE_MATTER
 * PALLIDUM_LEFT
 * PALLIDUM_RIGHT
 * PUTAMEN_LEFT
 * PUTAMEN_RIGHT
 * THALAMUS_LEFT
 * THALAMUS_RIGHT.
 *
 * @param cifti_out the output cifti
 * @param cifti the input cifti
 * @param direction which dimension to take the gradient along, ROW or COLUMN
 * @param left_surface specify the left surface to use
 * @param right_surface specify the right surface to use
 * @param cerebellum_surface specify the cerebellum surface to use
 * @param vectors output gradient vectors
 * @param surface specify a surface by structure name
 * @param volume_kernel smooth on the surface before computing the gradient

the size of the gaussian volume smoothing kernel in mm, as sigma by default
 * @param surface_kernel smooth on the surface before computing the gradient

the size of the gaussian surface smoothing kernel in mm, as sigma by default
 * @param average_output output the average of the gradient magnitude maps instead of each gradient map separately
 * @param presmooth_fwhm smoothing kernel sizes are FWHM, not sigma
 * @param runner Command runner
 *
 * @returns NamedTuple of outputs (described in `CiftiGradientOutputs`).
 */
function cifti_gradient(
    cifti_out: string,
    cifti: InputPathType,
    direction: string,
    left_surface: CiftiGradientLeftSurfaceParamsDict | null = null,
    right_surface: CiftiGradientRightSurfaceParamsDict | null = null,
    cerebellum_surface: CiftiGradientCerebellumSurfaceParamsDict | null = null,
    vectors: CiftiGradientVectorsParamsDict | null = null,
    surface: Array<CiftiGradientSurfaceParamsDict> | null = null,
    volume_kernel: number | null = null,
    surface_kernel: number | null = null,
    average_output: boolean = false,
    presmooth_fwhm: boolean = false,
    runner: Runner | null = null,
): CiftiGradientOutputs {
    const params = cifti_gradient_params(cifti_out, cifti, direction, left_surface, right_surface, cerebellum_surface, vectors, surface, volume_kernel, surface_kernel, average_output, presmooth_fwhm)
    return cifti_gradient_execute(params, runner);
}


export {
      CIFTI_GRADIENT_METADATA,
      CiftiGradientCerebellumSurfaceParamsDict,
      CiftiGradientCerebellumSurfaceParamsDictTagged,
      CiftiGradientLeftSurfaceParamsDict,
      CiftiGradientLeftSurfaceParamsDictTagged,
      CiftiGradientOutputs,
      CiftiGradientParamsDict,
      CiftiGradientParamsDictTagged,
      CiftiGradientRightSurfaceParamsDict,
      CiftiGradientRightSurfaceParamsDictTagged,
      CiftiGradientSurfaceParamsDict,
      CiftiGradientSurfaceParamsDictTagged,
      CiftiGradientVectorsOutputs,
      CiftiGradientVectorsParamsDict,
      CiftiGradientVectorsParamsDictTagged,
      cifti_gradient,
      cifti_gradient_cerebellum_surface,
      cifti_gradient_execute,
      cifti_gradient_left_surface,
      cifti_gradient_params,
      cifti_gradient_right_surface,
      cifti_gradient_surface,
      cifti_gradient_vectors,
};
