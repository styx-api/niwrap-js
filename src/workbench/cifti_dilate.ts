// This file was auto generated by Styx.
// Do not edit this file directly.

import { Runner, Execution, Metadata, InputPathType, OutputPathType, getGlobalRunner } from 'styxdefs';

const CIFTI_DILATE_METADATA: Metadata = {
    id: "224f2fa95412d16b7d3853836e3c088fb81a4158.workbench",
    name: "cifti-dilate",
    package: "workbench",
    container_image_tag: "nx10x/workbench:2.1.0",
};


interface CiftiDilateLeftSurfaceParamsDict {
    "@type"?: "left-surface";
    "surface": InputPathType;
    "area-metric"?: InputPathType | null | undefined;
}
type CiftiDilateLeftSurfaceParamsDictTagged = Required<Pick<CiftiDilateLeftSurfaceParamsDict, '@type'>> & CiftiDilateLeftSurfaceParamsDict;


interface CiftiDilateRightSurfaceParamsDict {
    "@type"?: "right-surface";
    "surface": InputPathType;
    "area-metric"?: InputPathType | null | undefined;
}
type CiftiDilateRightSurfaceParamsDictTagged = Required<Pick<CiftiDilateRightSurfaceParamsDict, '@type'>> & CiftiDilateRightSurfaceParamsDict;


interface CiftiDilateCerebellumSurfaceParamsDict {
    "@type"?: "cerebellum-surface";
    "surface": InputPathType;
    "area-metric"?: InputPathType | null | undefined;
}
type CiftiDilateCerebellumSurfaceParamsDictTagged = Required<Pick<CiftiDilateCerebellumSurfaceParamsDict, '@type'>> & CiftiDilateCerebellumSurfaceParamsDict;


interface CiftiDilateParamsDict {
    "@type"?: "workbench/cifti-dilate";
    "cifti-out": string;
    "left-surface"?: CiftiDilateLeftSurfaceParamsDict | null | undefined;
    "right-surface"?: CiftiDilateRightSurfaceParamsDict | null | undefined;
    "cerebellum-surface"?: CiftiDilateCerebellumSurfaceParamsDict | null | undefined;
    "roi-cifti"?: InputPathType | null | undefined;
    "nearest": boolean;
    "merged-volume": boolean;
    "legacy-mode": boolean;
    "cifti-in": InputPathType;
    "direction": string;
    "surface-distance": number;
    "volume-distance": number;
}
type CiftiDilateParamsDictTagged = Required<Pick<CiftiDilateParamsDict, '@type'>> & CiftiDilateParamsDict;


/**
 * Build parameters.
 *
 * @param surface the left surface file
 * @param area_metric vertex areas to use instead of computing them from the left surface

the corrected vertex areas, as a metric
 *
 * @returns Parameter dictionary
 */
function cifti_dilate_left_surface(
    surface: InputPathType,
    area_metric: InputPathType | null = null,
): CiftiDilateLeftSurfaceParamsDictTagged {
    const params = {
        "@type": "left-surface" as const,
        "surface": surface,
    };
    if (area_metric !== null) {
        params["area-metric"] = area_metric;
    }
    return params;
}


/**
 * Build command-line arguments from parameters.
 *
 * @param params The parameters.
 * @param execution The execution object for resolving input paths.
 *
 * @returns Command-line arguments.
 */
function cifti_dilate_left_surface_cargs(
    params: CiftiDilateLeftSurfaceParamsDict,
    execution: Execution,
): string[] {
    const cargs: string[] = [];
    cargs.push(
        "-left-surface",
        execution.inputFile((params["surface"] ?? null)),
        "-left-corrected-areas",
        (((params["area-metric"] ?? null) !== null) ? execution.inputFile((params["area-metric"] ?? null)) : "")
    );
    return cargs;
}


/**
 * Build parameters.
 *
 * @param surface the right surface file
 * @param area_metric vertex areas to use instead of computing them from the right surface

the corrected vertex areas, as a metric
 *
 * @returns Parameter dictionary
 */
function cifti_dilate_right_surface(
    surface: InputPathType,
    area_metric: InputPathType | null = null,
): CiftiDilateRightSurfaceParamsDictTagged {
    const params = {
        "@type": "right-surface" as const,
        "surface": surface,
    };
    if (area_metric !== null) {
        params["area-metric"] = area_metric;
    }
    return params;
}


/**
 * Build command-line arguments from parameters.
 *
 * @param params The parameters.
 * @param execution The execution object for resolving input paths.
 *
 * @returns Command-line arguments.
 */
function cifti_dilate_right_surface_cargs(
    params: CiftiDilateRightSurfaceParamsDict,
    execution: Execution,
): string[] {
    const cargs: string[] = [];
    cargs.push(
        "-right-surface",
        execution.inputFile((params["surface"] ?? null)),
        "-right-corrected-areas",
        (((params["area-metric"] ?? null) !== null) ? execution.inputFile((params["area-metric"] ?? null)) : "")
    );
    return cargs;
}


/**
 * Build parameters.
 *
 * @param surface the cerebellum surface file
 * @param area_metric vertex areas to use instead of computing them from the cerebellum surface

the corrected vertex areas, as a metric
 *
 * @returns Parameter dictionary
 */
function cifti_dilate_cerebellum_surface(
    surface: InputPathType,
    area_metric: InputPathType | null = null,
): CiftiDilateCerebellumSurfaceParamsDictTagged {
    const params = {
        "@type": "cerebellum-surface" as const,
        "surface": surface,
    };
    if (area_metric !== null) {
        params["area-metric"] = area_metric;
    }
    return params;
}


/**
 * Build command-line arguments from parameters.
 *
 * @param params The parameters.
 * @param execution The execution object for resolving input paths.
 *
 * @returns Command-line arguments.
 */
function cifti_dilate_cerebellum_surface_cargs(
    params: CiftiDilateCerebellumSurfaceParamsDict,
    execution: Execution,
): string[] {
    const cargs: string[] = [];
    cargs.push(
        "-cerebellum-surface",
        execution.inputFile((params["surface"] ?? null)),
        "-cerebellum-corrected-areas",
        (((params["area-metric"] ?? null) !== null) ? execution.inputFile((params["area-metric"] ?? null)) : "")
    );
    return cargs;
}


/**
 * Output object returned when calling `CiftiDilateParamsDict(...)`.
 *
 * @interface
 */
interface CiftiDilateOutputs {
    /**
     * Output root folder. This is the root folder for all outputs.
     */
    root: OutputPathType;
    /**
     * the output cifti file
     */
    cifti_out: OutputPathType;
}


/**
 * Build parameters.
 *
 * @param cifti_out the output cifti file
 * @param cifti_in the input cifti file
 * @param direction which dimension to dilate along, ROW or COLUMN
 * @param surface_distance the distance to dilate on surfaces, in mm
 * @param volume_distance the distance to dilate in the volume, in mm
 * @param left_surface specify the left surface to use
 * @param right_surface specify the right surface to use
 * @param cerebellum_surface specify the cerebellum surface to use
 * @param roi_cifti specify an roi of brainordinates to overwrite, rather than zeros

cifti dscalar or dtseries file, positive values denote brainordinates to have their values replaced
 * @param nearest use nearest good value instead of a weighted average
 * @param merged_volume treat volume components as if they were a single component
 * @param legacy_mode use the math from v1.3.2 and earlier for weighted dilation
 *
 * @returns Parameter dictionary
 */
function cifti_dilate_params(
    cifti_out: string,
    cifti_in: InputPathType,
    direction: string,
    surface_distance: number,
    volume_distance: number,
    left_surface: CiftiDilateLeftSurfaceParamsDict | null = null,
    right_surface: CiftiDilateRightSurfaceParamsDict | null = null,
    cerebellum_surface: CiftiDilateCerebellumSurfaceParamsDict | null = null,
    roi_cifti: InputPathType | null = null,
    nearest: boolean = false,
    merged_volume: boolean = false,
    legacy_mode: boolean = false,
): CiftiDilateParamsDictTagged {
    const params = {
        "@type": "workbench/cifti-dilate" as const,
        "cifti-out": cifti_out,
        "nearest": nearest,
        "merged-volume": merged_volume,
        "legacy-mode": legacy_mode,
        "cifti-in": cifti_in,
        "direction": direction,
        "surface-distance": surface_distance,
        "volume-distance": volume_distance,
    };
    if (left_surface !== null) {
        params["left-surface"] = left_surface;
    }
    if (right_surface !== null) {
        params["right-surface"] = right_surface;
    }
    if (cerebellum_surface !== null) {
        params["cerebellum-surface"] = cerebellum_surface;
    }
    if (roi_cifti !== null) {
        params["roi-cifti"] = roi_cifti;
    }
    return params;
}


/**
 * Build command-line arguments from parameters.
 *
 * @param params The parameters.
 * @param execution The execution object for resolving input paths.
 *
 * @returns Command-line arguments.
 */
function cifti_dilate_cargs(
    params: CiftiDilateParamsDict,
    execution: Execution,
): string[] {
    const cargs: string[] = [];
    cargs.push(
        "wb_command",
        "-cifti-dilate",
        (params["cifti-out"] ?? null),
        ...(((params["left-surface"] ?? null) !== null) ? cifti_dilate_left_surface_cargs((params["left-surface"] ?? null), execution) : []),
        ...(((params["right-surface"] ?? null) !== null) ? cifti_dilate_right_surface_cargs((params["right-surface"] ?? null), execution) : []),
        ...(((params["cerebellum-surface"] ?? null) !== null) ? cifti_dilate_cerebellum_surface_cargs((params["cerebellum-surface"] ?? null), execution) : []),
        "-bad-brainordinate-roi",
        (((params["roi-cifti"] ?? null) !== null) ? execution.inputFile((params["roi-cifti"] ?? null)) : ""),
        (((params["nearest"] ?? false)) ? "-nearest" : ""),
        (((params["merged-volume"] ?? false)) ? "-merged-volume" : ""),
        (((params["legacy-mode"] ?? false)) ? "-legacy-mode" : "")
    );
    cargs.push(execution.inputFile((params["cifti-in"] ?? null)));
    cargs.push((params["direction"] ?? null));
    cargs.push(String((params["surface-distance"] ?? null)));
    cargs.push(String((params["volume-distance"] ?? null)));
    return cargs;
}


/**
 * Build outputs object containing output file paths and possibly stdout/stderr.
 *
 * @param params The parameters.
 * @param execution The execution object for resolving input paths.
 *
 * @returns Outputs object.
 */
function cifti_dilate_outputs(
    params: CiftiDilateParamsDict,
    execution: Execution,
): CiftiDilateOutputs {
    const ret: CiftiDilateOutputs = {
        root: execution.outputFile("."),
        cifti_out: execution.outputFile([(params["cifti-out"] ?? null)].join('')),
    };
    return ret;
}


/**
 * DILATE A CIFTI FILE.
 *
 * For all data values designated as bad, if they neighbor a good value or are within the specified distance of a good value in the same kind of model, replace the value with a distance weighted average of nearby good values, otherwise set the value to zero.  If -nearest is specified, it will use the value from the closest good value within range instead of a weighted average.  When the input file contains label data, nearest dilation is used on the surface, and weighted popularity is used in the volume.
 *
 * The -*-corrected-areas options are intended for dilating on group average surfaces, but it is only an approximate correction for the reduction of structure in a group average surface.
 *
 * If -bad-brainordinate-roi is specified, all values, including those with value zero, are good, except for locations with a positive value in the ROI.  If it is not specified, only values equal to zero are bad.
 *
 * @param params The parameters.
 * @param runner Command runner
 *
 * @returns NamedTuple of outputs (described in `CiftiDilateOutputs`).
 */
function cifti_dilate_execute(
    params: CiftiDilateParamsDict,
    runner: Runner | null = null,
): CiftiDilateOutputs {
    runner = runner || getGlobalRunner();
    const execution = runner.startExecution(CIFTI_DILATE_METADATA);
    params = execution.params(params)
    const cargs = cifti_dilate_cargs(params, execution)
    const ret = cifti_dilate_outputs(params, execution)
    execution.run(cargs, undefined);
    return ret;
}


/**
 * DILATE A CIFTI FILE.
 *
 * For all data values designated as bad, if they neighbor a good value or are within the specified distance of a good value in the same kind of model, replace the value with a distance weighted average of nearby good values, otherwise set the value to zero.  If -nearest is specified, it will use the value from the closest good value within range instead of a weighted average.  When the input file contains label data, nearest dilation is used on the surface, and weighted popularity is used in the volume.
 *
 * The -*-corrected-areas options are intended for dilating on group average surfaces, but it is only an approximate correction for the reduction of structure in a group average surface.
 *
 * If -bad-brainordinate-roi is specified, all values, including those with value zero, are good, except for locations with a positive value in the ROI.  If it is not specified, only values equal to zero are bad.
 *
 * @param cifti_out the output cifti file
 * @param cifti_in the input cifti file
 * @param direction which dimension to dilate along, ROW or COLUMN
 * @param surface_distance the distance to dilate on surfaces, in mm
 * @param volume_distance the distance to dilate in the volume, in mm
 * @param left_surface specify the left surface to use
 * @param right_surface specify the right surface to use
 * @param cerebellum_surface specify the cerebellum surface to use
 * @param roi_cifti specify an roi of brainordinates to overwrite, rather than zeros

cifti dscalar or dtseries file, positive values denote brainordinates to have their values replaced
 * @param nearest use nearest good value instead of a weighted average
 * @param merged_volume treat volume components as if they were a single component
 * @param legacy_mode use the math from v1.3.2 and earlier for weighted dilation
 * @param runner Command runner
 *
 * @returns NamedTuple of outputs (described in `CiftiDilateOutputs`).
 */
function cifti_dilate(
    cifti_out: string,
    cifti_in: InputPathType,
    direction: string,
    surface_distance: number,
    volume_distance: number,
    left_surface: CiftiDilateLeftSurfaceParamsDict | null = null,
    right_surface: CiftiDilateRightSurfaceParamsDict | null = null,
    cerebellum_surface: CiftiDilateCerebellumSurfaceParamsDict | null = null,
    roi_cifti: InputPathType | null = null,
    nearest: boolean = false,
    merged_volume: boolean = false,
    legacy_mode: boolean = false,
    runner: Runner | null = null,
): CiftiDilateOutputs {
    const params = cifti_dilate_params(cifti_out, cifti_in, direction, surface_distance, volume_distance, left_surface, right_surface, cerebellum_surface, roi_cifti, nearest, merged_volume, legacy_mode)
    return cifti_dilate_execute(params, runner);
}


export {
      CIFTI_DILATE_METADATA,
      CiftiDilateCerebellumSurfaceParamsDict,
      CiftiDilateCerebellumSurfaceParamsDictTagged,
      CiftiDilateLeftSurfaceParamsDict,
      CiftiDilateLeftSurfaceParamsDictTagged,
      CiftiDilateOutputs,
      CiftiDilateParamsDict,
      CiftiDilateParamsDictTagged,
      CiftiDilateRightSurfaceParamsDict,
      CiftiDilateRightSurfaceParamsDictTagged,
      cifti_dilate,
      cifti_dilate_cerebellum_surface,
      cifti_dilate_execute,
      cifti_dilate_left_surface,
      cifti_dilate_params,
      cifti_dilate_right_surface,
};
