// This file was auto generated by Styx.
// Do not edit this file directly.

import { Runner, Execution, Metadata, InputPathType, OutputPathType, getGlobalRunner } from 'styxdefs';

const SIMULATE_DISPLACEMENT_FIELD_METADATA: Metadata = {
    id: "ca776aa44d13ed564a1e49ff2d3269669eb9067c.boutiques",
    name: "SimulateDisplacementField",
    package: "ants",
    container_image_tag: "antsx/ants:v2.5.3",
};


interface SimulateDisplacementFieldBsplineOptionsParameters {
    "__STYXTYPE__": "bspline_options";
    "number_of_fitting_levels"?: number | null | undefined;
    "number_of_control_points"?: number | null | undefined;
}


interface SimulateDisplacementFieldExponentialOptionsParameters {
    "__STYXTYPE__": "exponential_options";
    "smoothing_standard_deviation"?: number | null | undefined;
}


interface SimulateDisplacementFieldParameters {
    "__STYXTYPE__": "SimulateDisplacementField";
    "image_dimension": number;
    "displacement_field_type": "BSpline" | "Exponential";
    "domain_image": InputPathType;
    "output_field": string;
    "number_of_random_points"?: number | null | undefined;
    "standard_deviation_displacement_field"?: number | null | undefined;
    "enforce_stationary_boundary"?: number | null | undefined;
    "displacement_specific_options"?: SimulateDisplacementFieldBsplineOptionsParameters | SimulateDisplacementFieldExponentialOptionsParameters | null | undefined;
}


function dynCargs(
    t: string,
): Function | undefined {
    /**
     * Get build cargs function by command type.
    
     * @param t Command type
    
     * @returns Build cargs function.
     */
    const cargsFuncs = {
        "SimulateDisplacementField": simulate_displacement_field_cargs,
        "bspline_options": simulate_displacement_field_bspline_options_cargs,
        "exponential_options": simulate_displacement_field_exponential_options_cargs,
    };
    return cargsFuncs[t];
}


function dynOutputs(
    t: string,
): Function | undefined {
    /**
     * Get build outputs function by command type.
    
     * @param t Command type
    
     * @returns Build outputs function.
     */
    const outputsFuncs = {
        "SimulateDisplacementField": simulate_displacement_field_outputs,
    };
    return outputsFuncs[t];
}


function simulate_displacement_field_bspline_options_params(
    number_of_fitting_levels: number | null = 4,
    number_of_control_points: number | null = 4,
): SimulateDisplacementFieldBsplineOptionsParameters {
    /**
     * Build parameters.
    
     * @param number_of_fitting_levels Number of fitting levels for BSpline.
     * @param number_of_control_points Number of control points for BSpline.
    
     * @returns Parameter dictionary
     */
    const params = {
        "__STYXTYPE__": "bspline_options" as const,
    };
    if (number_of_fitting_levels !== null) {
        params["number_of_fitting_levels"] = number_of_fitting_levels;
    }
    if (number_of_control_points !== null) {
        params["number_of_control_points"] = number_of_control_points;
    }
    return params;
}


function simulate_displacement_field_bspline_options_cargs(
    params: SimulateDisplacementFieldBsplineOptionsParameters,
    execution: Execution,
): string[] {
    /**
     * Build command-line arguments from parameters.
    
     * @param params The parameters.
     * @param execution The execution object for resolving input paths.
    
     * @returns Command-line arguments.
     */
    const cargs: string[] = [];
    if ((params["number_of_fitting_levels"] ?? null) !== null) {
        cargs.push(String((params["number_of_fitting_levels"] ?? null)));
    }
    if ((params["number_of_control_points"] ?? null) !== null) {
        cargs.push(String((params["number_of_control_points"] ?? null)));
    }
    return cargs;
}


function simulate_displacement_field_exponential_options_params(
    smoothing_standard_deviation: number | null = 4,
): SimulateDisplacementFieldExponentialOptionsParameters {
    /**
     * Build parameters.
    
     * @param smoothing_standard_deviation Smoothing standard deviation for Exponential.
    
     * @returns Parameter dictionary
     */
    const params = {
        "__STYXTYPE__": "exponential_options" as const,
    };
    if (smoothing_standard_deviation !== null) {
        params["smoothing_standard_deviation"] = smoothing_standard_deviation;
    }
    return params;
}


function simulate_displacement_field_exponential_options_cargs(
    params: SimulateDisplacementFieldExponentialOptionsParameters,
    execution: Execution,
): string[] {
    /**
     * Build command-line arguments from parameters.
    
     * @param params The parameters.
     * @param execution The execution object for resolving input paths.
    
     * @returns Command-line arguments.
     */
    const cargs: string[] = [];
    if ((params["smoothing_standard_deviation"] ?? null) !== null) {
        cargs.push(String((params["smoothing_standard_deviation"] ?? null)));
    }
    return cargs;
}


/**
 * Output object returned when calling `simulate_displacement_field(...)`.
 *
 * @interface
 */
interface SimulateDisplacementFieldOutputs {
    /**
     * Output root folder. This is the root folder for all outputs.
     */
    root: OutputPathType;
    /**
     * The simulated displacement field.
     */
    output_displacement_field: OutputPathType;
}


function simulate_displacement_field_params(
    image_dimension: number,
    displacement_field_type: "BSpline" | "Exponential",
    domain_image: InputPathType,
    output_field: string,
    number_of_random_points: number | null = 1000,
    standard_deviation_displacement_field: number | null = 10,
    enforce_stationary_boundary: number | null = 1,
    displacement_specific_options: SimulateDisplacementFieldBsplineOptionsParameters | SimulateDisplacementFieldExponentialOptionsParameters | null = null,
): SimulateDisplacementFieldParameters {
    /**
     * Build parameters.
    
     * @param image_dimension Dimensionality of the image.
     * @param displacement_field_type Type of displacement field to simulate.
     * @param domain_image Image defining the domain for the displacement field.
     * @param output_field Path to save the output displacement field.
     * @param number_of_random_points Number of random points to use in the simulation.
     * @param standard_deviation_displacement_field Standard deviation for the displacement field.
     * @param enforce_stationary_boundary Boolean flag indicating whether to enforce stationary boundary.
     * @param displacement_specific_options Options specific to the type of displacement field simulation.
    
     * @returns Parameter dictionary
     */
    const params = {
        "__STYXTYPE__": "SimulateDisplacementField" as const,
        "image_dimension": image_dimension,
        "displacement_field_type": displacement_field_type,
        "domain_image": domain_image,
        "output_field": output_field,
    };
    if (number_of_random_points !== null) {
        params["number_of_random_points"] = number_of_random_points;
    }
    if (standard_deviation_displacement_field !== null) {
        params["standard_deviation_displacement_field"] = standard_deviation_displacement_field;
    }
    if (enforce_stationary_boundary !== null) {
        params["enforce_stationary_boundary"] = enforce_stationary_boundary;
    }
    if (displacement_specific_options !== null) {
        params["displacement_specific_options"] = displacement_specific_options;
    }
    return params;
}


function simulate_displacement_field_cargs(
    params: SimulateDisplacementFieldParameters,
    execution: Execution,
): string[] {
    /**
     * Build command-line arguments from parameters.
    
     * @param params The parameters.
     * @param execution The execution object for resolving input paths.
    
     * @returns Command-line arguments.
     */
    const cargs: string[] = [];
    cargs.push("SimulateDisplacementField");
    cargs.push(String((params["image_dimension"] ?? null)));
    cargs.push((params["displacement_field_type"] ?? null));
    cargs.push(execution.inputFile((params["domain_image"] ?? null)));
    cargs.push((params["output_field"] ?? null));
    if ((params["number_of_random_points"] ?? null) !== null) {
        cargs.push(String((params["number_of_random_points"] ?? null)));
    }
    if ((params["standard_deviation_displacement_field"] ?? null) !== null) {
        cargs.push(String((params["standard_deviation_displacement_field"] ?? null)));
    }
    if ((params["enforce_stationary_boundary"] ?? null) !== null) {
        cargs.push(String((params["enforce_stationary_boundary"] ?? null)));
    }
    if ((params["displacement_specific_options"] ?? null) !== null) {
        cargs.push(...dynCargs((params["displacement_specific_options"] ?? null).__STYXTYPE__)((params["displacement_specific_options"] ?? null), execution));
    }
    return cargs;
}


function simulate_displacement_field_outputs(
    params: SimulateDisplacementFieldParameters,
    execution: Execution,
): SimulateDisplacementFieldOutputs {
    /**
     * Build outputs object containing output file paths and possibly stdout/stderr.
    
     * @param params The parameters.
     * @param execution The execution object for resolving input paths.
    
     * @returns Outputs object.
     */
    const ret: SimulateDisplacementFieldOutputs = {
        root: execution.outputFile("."),
        output_displacement_field: execution.outputFile([(params["output_field"] ?? null)].join('')),
    };
    return ret;
}


function simulate_displacement_field_execute(
    params: SimulateDisplacementFieldParameters,
    execution: Execution,
): SimulateDisplacementFieldOutputs {
    /**
     * Simulate displacement fields using various methods such as BSpline or Exponential.
     * 
     * Author: ANTs Developers
     * 
     * URL: https://github.com/ANTsX/ANTs
    
     * @param params The parameters.
     * @param execution The execution object.
    
     * @returns NamedTuple of outputs (described in `SimulateDisplacementFieldOutputs`).
     */
    params = execution.params(params)
    const cargs = simulate_displacement_field_cargs(params, execution)
    const ret = simulate_displacement_field_outputs(params, execution)
    execution.run(cargs, undefined);
    return ret;
}


function simulate_displacement_field(
    image_dimension: number,
    displacement_field_type: "BSpline" | "Exponential",
    domain_image: InputPathType,
    output_field: string,
    number_of_random_points: number | null = 1000,
    standard_deviation_displacement_field: number | null = 10,
    enforce_stationary_boundary: number | null = 1,
    displacement_specific_options: SimulateDisplacementFieldBsplineOptionsParameters | SimulateDisplacementFieldExponentialOptionsParameters | null = null,
    runner: Runner | null = null,
): SimulateDisplacementFieldOutputs {
    /**
     * Simulate displacement fields using various methods such as BSpline or Exponential.
     * 
     * Author: ANTs Developers
     * 
     * URL: https://github.com/ANTsX/ANTs
    
     * @param image_dimension Dimensionality of the image.
     * @param displacement_field_type Type of displacement field to simulate.
     * @param domain_image Image defining the domain for the displacement field.
     * @param output_field Path to save the output displacement field.
     * @param number_of_random_points Number of random points to use in the simulation.
     * @param standard_deviation_displacement_field Standard deviation for the displacement field.
     * @param enforce_stationary_boundary Boolean flag indicating whether to enforce stationary boundary.
     * @param displacement_specific_options Options specific to the type of displacement field simulation.
     * @param runner Command runner
    
     * @returns NamedTuple of outputs (described in `SimulateDisplacementFieldOutputs`).
     */
    runner = runner || getGlobalRunner();
    const execution = runner.startExecution(SIMULATE_DISPLACEMENT_FIELD_METADATA);
    const params = simulate_displacement_field_params(image_dimension, displacement_field_type, domain_image, output_field, number_of_random_points, standard_deviation_displacement_field, enforce_stationary_boundary, displacement_specific_options)
    return simulate_displacement_field_execute(params, execution);
}


export {
      SIMULATE_DISPLACEMENT_FIELD_METADATA,
      SimulateDisplacementFieldBsplineOptionsParameters,
      SimulateDisplacementFieldExponentialOptionsParameters,
      SimulateDisplacementFieldOutputs,
      SimulateDisplacementFieldParameters,
      simulate_displacement_field,
      simulate_displacement_field_bspline_options_params,
      simulate_displacement_field_exponential_options_params,
      simulate_displacement_field_params,
};
