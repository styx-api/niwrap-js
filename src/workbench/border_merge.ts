// This file was auto generated by Styx.
// Do not edit this file directly.

import { Runner, Execution, Metadata, InputPathType, OutputPathType, getGlobalRunner } from 'styxdefs';

const BORDER_MERGE_METADATA: Metadata = {
    id: "2b501fbb7f7c4f9515ae97ae16a101a97a54eaab.workbench",
    name: "border-merge",
    package: "workbench",
    container_image_tag: "nx10x/workbench:2.1.0",
};


interface BorderMergeUpToParamsDict {
    "@type"?: "up-to";
    "last-border": string;
    "reverse": boolean;
}
type BorderMergeUpToParamsDictTagged = Required<Pick<BorderMergeUpToParamsDict, '@type'>> & BorderMergeUpToParamsDict;


interface BorderMergeSelectParamsDict {
    "@type"?: "select";
    "border": string;
    "up-to"?: BorderMergeUpToParamsDict | null | undefined;
}
type BorderMergeSelectParamsDictTagged = Required<Pick<BorderMergeSelectParamsDict, '@type'>> & BorderMergeSelectParamsDict;


interface BorderMergeBorderParamsDict {
    "@type"?: "border";
    "border-file-in": InputPathType;
    "select"?: Array<BorderMergeSelectParamsDict> | null | undefined;
}
type BorderMergeBorderParamsDictTagged = Required<Pick<BorderMergeBorderParamsDict, '@type'>> & BorderMergeBorderParamsDict;


interface BorderMergeParamsDict {
    "@type"?: "workbench/border-merge";
    "border-file-out": string;
    "border"?: Array<BorderMergeBorderParamsDict> | null | undefined;
}
type BorderMergeParamsDictTagged = Required<Pick<BorderMergeParamsDict, '@type'>> & BorderMergeParamsDict;


/**
 * Build parameters.
 *
 * @param last_border the number or name of the last column to include
 * @param reverse use the range in reverse order
 *
 * @returns Parameter dictionary
 */
function border_merge_up_to(
    last_border: string,
    reverse: boolean = false,
): BorderMergeUpToParamsDictTagged {
    const params = {
        "@type": "up-to" as const,
        "last-border": last_border,
        "reverse": reverse,
    };
    return params;
}


/**
 * Build command-line arguments from parameters.
 *
 * @param params The parameters.
 * @param execution The execution object for resolving input paths.
 *
 * @returns Command-line arguments.
 */
function border_merge_up_to_cargs(
    params: BorderMergeUpToParamsDict,
    execution: Execution,
): string[] {
    const cargs: string[] = [];
    cargs.push(
        "-up-to",
        (params["last-border"] ?? null),
        (((params["reverse"] ?? false)) ? "-reverse" : "")
    );
    return cargs;
}


/**
 * Build parameters.
 *
 * @param border the border number or name
 * @param up_to use an inclusive range of borders
 *
 * @returns Parameter dictionary
 */
function border_merge_select(
    border: string,
    up_to: BorderMergeUpToParamsDict | null = null,
): BorderMergeSelectParamsDictTagged {
    const params = {
        "@type": "select" as const,
        "border": border,
    };
    if (up_to !== null) {
        params["up-to"] = up_to;
    }
    return params;
}


/**
 * Build command-line arguments from parameters.
 *
 * @param params The parameters.
 * @param execution The execution object for resolving input paths.
 *
 * @returns Command-line arguments.
 */
function border_merge_select_cargs(
    params: BorderMergeSelectParamsDict,
    execution: Execution,
): string[] {
    const cargs: string[] = [];
    cargs.push(
        "-select",
        (params["border"] ?? null),
        ...(((params["up-to"] ?? null) !== null) ? border_merge_up_to_cargs((params["up-to"] ?? null), execution) : [])
    );
    return cargs;
}


/**
 * Build parameters.
 *
 * @param border_file_in a border file to use borders from
 * @param select select a single border to use
 *
 * @returns Parameter dictionary
 */
function border_merge_border(
    border_file_in: InputPathType,
    select: Array<BorderMergeSelectParamsDict> | null = null,
): BorderMergeBorderParamsDictTagged {
    const params = {
        "@type": "border" as const,
        "border-file-in": border_file_in,
    };
    if (select !== null) {
        params["select"] = select;
    }
    return params;
}


/**
 * Build command-line arguments from parameters.
 *
 * @param params The parameters.
 * @param execution The execution object for resolving input paths.
 *
 * @returns Command-line arguments.
 */
function border_merge_border_cargs(
    params: BorderMergeBorderParamsDict,
    execution: Execution,
): string[] {
    const cargs: string[] = [];
    cargs.push(
        "-border",
        execution.inputFile((params["border-file-in"] ?? null)),
        ...(((params["select"] ?? null) !== null) ? (params["select"] ?? null).map(s => border_merge_select_cargs(s, execution)).flat() : [])
    );
    return cargs;
}


/**
 * Output object returned when calling `BorderMergeParamsDict(...)`.
 *
 * @interface
 */
interface BorderMergeOutputs {
    /**
     * Output root folder. This is the root folder for all outputs.
     */
    root: OutputPathType;
    /**
     * the output border file
     */
    border_file_out: OutputPathType;
}


/**
 * Build parameters.
 *
 * @param border_file_out the output border file
 * @param border specify an input border file
 *
 * @returns Parameter dictionary
 */
function border_merge_params(
    border_file_out: string,
    border: Array<BorderMergeBorderParamsDict> | null = null,
): BorderMergeParamsDictTagged {
    const params = {
        "@type": "workbench/border-merge" as const,
        "border-file-out": border_file_out,
    };
    if (border !== null) {
        params["border"] = border;
    }
    return params;
}


/**
 * Build command-line arguments from parameters.
 *
 * @param params The parameters.
 * @param execution The execution object for resolving input paths.
 *
 * @returns Command-line arguments.
 */
function border_merge_cargs(
    params: BorderMergeParamsDict,
    execution: Execution,
): string[] {
    const cargs: string[] = [];
    cargs.push(
        "wb_command",
        "-border-merge",
        (params["border-file-out"] ?? null),
        ...(((params["border"] ?? null) !== null) ? (params["border"] ?? null).map(s => border_merge_border_cargs(s, execution)).flat() : [])
    );
    return cargs;
}


/**
 * Build outputs object containing output file paths and possibly stdout/stderr.
 *
 * @param params The parameters.
 * @param execution The execution object for resolving input paths.
 *
 * @returns Outputs object.
 */
function border_merge_outputs(
    params: BorderMergeParamsDict,
    execution: Execution,
): BorderMergeOutputs {
    const ret: BorderMergeOutputs = {
        root: execution.outputFile("."),
        border_file_out: execution.outputFile([(params["border-file-out"] ?? null)].join('')),
    };
    return ret;
}


/**
 * MERGE BORDER FILES INTO A NEW FILE.
 *
 * Takes one or more border files and makes a new border file from the borders in them.
 *
 * Example: wb_command -border-merge out.border -border first.border -select 1 -border second.border
 *
 * This example would take the first border from first.border, followed by all borders from second.border, and write these to out.border.
 *
 * @param params The parameters.
 * @param runner Command runner
 *
 * @returns NamedTuple of outputs (described in `BorderMergeOutputs`).
 */
function border_merge_execute(
    params: BorderMergeParamsDict,
    runner: Runner | null = null,
): BorderMergeOutputs {
    runner = runner || getGlobalRunner();
    const execution = runner.startExecution(BORDER_MERGE_METADATA);
    params = execution.params(params)
    const cargs = border_merge_cargs(params, execution)
    const ret = border_merge_outputs(params, execution)
    execution.run(cargs, undefined);
    return ret;
}


/**
 * MERGE BORDER FILES INTO A NEW FILE.
 *
 * Takes one or more border files and makes a new border file from the borders in them.
 *
 * Example: wb_command -border-merge out.border -border first.border -select 1 -border second.border
 *
 * This example would take the first border from first.border, followed by all borders from second.border, and write these to out.border.
 *
 * @param border_file_out the output border file
 * @param border specify an input border file
 * @param runner Command runner
 *
 * @returns NamedTuple of outputs (described in `BorderMergeOutputs`).
 */
function border_merge(
    border_file_out: string,
    border: Array<BorderMergeBorderParamsDict> | null = null,
    runner: Runner | null = null,
): BorderMergeOutputs {
    const params = border_merge_params(border_file_out, border)
    return border_merge_execute(params, runner);
}


export {
      BORDER_MERGE_METADATA,
      BorderMergeBorderParamsDict,
      BorderMergeBorderParamsDictTagged,
      BorderMergeOutputs,
      BorderMergeParamsDict,
      BorderMergeParamsDictTagged,
      BorderMergeSelectParamsDict,
      BorderMergeSelectParamsDictTagged,
      BorderMergeUpToParamsDict,
      BorderMergeUpToParamsDictTagged,
      border_merge,
      border_merge_border,
      border_merge_execute,
      border_merge_params,
      border_merge_select,
      border_merge_up_to,
};
